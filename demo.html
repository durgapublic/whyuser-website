<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhyUser - Stop Building Blind</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-primary: #faf8f5;
            --bg-secondary: rgba(246, 243, 238, 0.8);
            --bg-accent: rgba(235, 227, 215, 0.3);
            --text-primary: #1a1816;
            --text-secondary: #4a453f;
            --text-tertiary: #726a5f;
            --accent: #8b6b47;
            --accent-hover: #735639;
            --success: #22863a;
            --error: #dc3545;
            --warning: #f59e0b;
            --border: rgba(139, 107, 71, 0.1);
            --shadow: rgba(26, 24, 22, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(250, 248, 245, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        header.scrolled {
            background: rgba(250, 248, 245, 0.95);
            box-shadow: 0 2px 40px var(--shadow);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 72px;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
        }

        .logo-image {
            height: 48px;
            width: auto;
            display: block;
            transition: opacity 0.3s ease;
        }

        .logo:hover .logo-image {
            opacity: 0.7;
        }

        .tagline {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .nav-links {
            display: flex;
            gap: 36px;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            padding: 140px 0 80px;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -25%;
            width: 70%;
            height: 150%;
            background: radial-gradient(circle, rgba(139, 107, 71, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .hero-content {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: clamp(36px, 7vw, 60px);
            font-weight: 600;
            line-height: 1.05;
            letter-spacing: -0.03em;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--accent) 0%, var(--error) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 24px;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 48px;
            line-height: 1.5;
        }
        
        /* Analysis Input Section */
        .analysis-input-section {
            padding: 40px;
            background: rgba(255,255,255,0.5);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 10px 40px var(--shadow);
            backdrop-filter: blur(10px);
        }
        
        h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            text-align: center;
        }

        .url-input {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .url-input input {
            flex: 1;
            padding: 18px 24px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        .url-input input:focus {
            border-color: var(--accent);
            background: white;
            box-shadow: 0 0 0 4px rgba(139, 107, 71, 0.1);
        }

        .predict-button {
            padding: 18px 36px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .predict-button:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(139, 107, 71, 0.3);
        }
        
        .predict-button:disabled {
            background: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .input-context {
            font-size: 14px;
            color: var(--text-tertiary);
            text-align: center;
            margin-top: 24px;
        }
        
        /* Interactive Demo Section */
        #interactiveDemoSection {
            display: none;
            padding: 80px 0;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .section-header h2 {
            font-size: 48px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .section-header p {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .analysis-progress {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .analysis-progress p {
            font-size: 20px;
            font-weight: 500;
            color: var(--text-secondary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        #personaSelectorSection {
            display: none;
        }
        .persona-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }
        .persona-selector-card {
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.4);
        }
        .persona-selector-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px var(--shadow);
            border-color: var(--accent);
        }
        .persona-selector-card.selected {
            border-color: var(--accent);
            background: var(--bg-accent);
            box-shadow: 0 8px 30px rgba(139, 107, 71, 0.1);
            transform: translateY(-2px);
        }
        .persona-selector-icon { font-size: 32px; margin-bottom: 12px; }
        .persona-selector-name { font-weight: 600; color: var(--text-primary); }
        .persona-selector-role { font-size: 14px; color: var(--text-tertiary); min-height: 40px; }
        
        #briefSection {
            display: none;
            margin-top: 64px;
        }

        /* Unified report card styling */
        .master-brief-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 16px 50px var(--shadow);
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .master-brief-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .brief-section {
            opacity: 1; /* Make sections visible by default within the card */
        }
        .brief-divider {
            border-top: 1px solid var(--border);
            margin: 40px 0;
        }

        /* Executive Summary & Scoreboard */
        .executive-summary-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; text-align: center; }
        .summary-card { padding: 24px; border: 1px solid var(--border); border-radius: 12px; background: var(--bg-primary); }
        .summary-card .stat { font-size: 40px; font-weight: 600; line-height: 1; }
        .summary-card .stat.critical { color: var(--error); }
        .summary-card .label { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; }
        .summary-card .description { font-size: 14px; color: var(--text-tertiary); }

        .executive-summary-list { list-style: none; padding-left: 0; }
        .executive-summary-list li { font-size: 18px; color: var(--text-secondary); margin-bottom: 16px; padding-left: 30px; position: relative; }
        .executive-summary-list li:last-child { margin-bottom: 0; }
        .executive-summary-list li::before { content: '‚ö°'; position: absolute; left: 0; top: 2px; font-size: 18px; }
        
        .scoreboard-table, .details-table, .path-analysis-table { width: 100%; border-collapse: collapse; font-size: 15px; margin-top: 24px; }
        .scoreboard-table th, .scoreboard-table td, .details-table th, .details-table td, .path-analysis-table th, .path-analysis-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
        .scoreboard-table th, .details-table th, .path-analysis-table th { color: var(--text-secondary); font-weight: 500; font-size: 14px; }
        .scoreboard-table td:first-child, .details-table td:first-child, .path-analysis-table td:first-child { font-weight: 600; }
        .path-analysis-table td { font-family: 'SF Mono', monospace; }
        .critical-blocker { color: var(--error); font-weight: 500; }
        .fail-verdict { background: rgba(220, 53, 69, 0.05); color: var(--error); font-weight: bold; border-radius: 4px; padding: 2px 6px; display: inline-block; }


        /* Heat Map Section */
        .heat-map-table { width: 100%; border-collapse: collapse; font-family: 'SF Mono', monospace; font-size: 14px; }
        .heat-map-table th, .heat-map-table td { padding: 12px; text-align: left; }
        .heat-map-table th { color: var(--text-tertiary); }
        .heat-map-table td:first-child { font-weight: 600; }
        .heat-map-table .friction-cell { font-weight: bold; }
        .friction-high { color: var(--error); }
        .friction-med { color: var(--warning); }
        .friction-low { color: var(--success); }
        .heat-map-legend { margin-top: 16px; text-align: center; font-size: 14px; color: var(--text-tertiary); }
        .heat-map-legend span { margin: 0 12px; }

        /* Tabs for Personas */
        .persona-tabs { display: flex; border-bottom: 2px solid var(--border); margin-bottom: 32px; }
        .tab-link { padding: 12px 20px; cursor: pointer; font-weight: 600; font-size: 16px; color: var(--text-tertiary); position: relative; border-bottom: 4px solid transparent; transition: all 0.3s ease; }
        .tab-link:hover { color: var(--text-primary); }
        .tab-link.active { color: var(--text-primary); border-bottom-color: var(--accent); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Persona Snapshot Section */
        .persona-variance-bar-container { width: 100%; height: 8px; background: var(--bg-accent); border-radius: 4px; margin-top: 8px; }
        .persona-variance-bar { height: 100%; border-radius: 4px; transition: width 0.5s ease-out; }
        .variance-consistent { background: var(--success); }
        .variance-moderate { background: var(--warning); }
        .variance-variable { background: var(--error); }

        .persona-score-badge { font-family: 'SF Mono', monospace; border: 2px solid var(--border); padding: 24px; border-radius: 8px; background: var(--bg-primary); text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center;}
        .persona-score-badge .score { font-size: 32px; font-weight: 600; color: var(--error); }
        .persona-score-badge .score-title { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--text-secondary); letter-spacing: 0.5px; text-transform: uppercase;}
        .persona-score-badge .score-subtitle { font-size: 14px; color: var(--text-tertiary); }
        
        .persona-dashboard-grid { display: grid; grid-template-columns: 1fr; gap: 32px; }
        .persona-vitals-table { width: 100%; margin-bottom: 24px; }
        .persona-header { display: flex; align-items: center; gap: 24px; border-bottom: 1px solid var(--border); padding-bottom: 24px; margin-bottom: 24px;}
        .persona-icon { font-size: 48px; background: var(--bg-accent); width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%; flex-shrink: 0; }
        .persona-title-group { flex: 1; }
        .persona-name { font-size: 24px; font-weight: 600; color: var(--text-primary); }
        .persona-fictional-name { font-size: 16px; color: var(--text-secondary); }
        .two-column-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; align-items: start; }
        .detail-card h4 { font-size: 20px; font-weight: 600; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 8px; }
        .worldview-list { list-style: none; padding-left: 0; }
        .worldview-list li { margin-bottom: 12px; padding-left: 24px; position: relative; color: var(--text-secondary); }
        .worldview-list li::before { content: 'üß†'; position: absolute; left: 0; top: 1px; }
        .worldview-list li strong { color: var(--text-primary); }
        
        /* Playbook Section */
        .playbook-section { border: 2px solid var(--success); background: rgba(34, 134, 58, 0.03); border-radius: 12px; padding: 32px; }
        .playbook-title { text-align: left; margin-bottom: 24px; }
        .playbook-title h3 { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        .playbook-table { width: 100%; border-collapse: collapse; }
        .playbook-table th, .playbook-table td { padding: 16px; text-align: left; border-bottom: 1px solid var(--border); }
        .playbook-table th { color: var(--text-secondary); font-weight: 500; font-size: 14px; }
        .value-score { font-weight: 700; font-size: 16px; }
        .playbook-note { font-size: 14px; color: var(--text-tertiary); margin-top: 16px; font-style: italic; }

        /* Inner Monologue Section Styling */
        .monologue-table { width: 100%; border-collapse: collapse; font-size: 15px; margin-top: 16px; }
        .monologue-table td { padding: 12px; border-bottom: 1px solid var(--border); }
        .monologue-time { font-family: 'SF Mono', monospace; color: var(--text-tertiary); width: 80px; vertical-align: top; }
        .monologue-thought { color: var(--text-secondary); }
        .monologue-thought strong { color: var(--error); }


        /* Share Badge Section */
        .share-badge-container { text-align: center; }
        .share-badge-text p { margin: 0 0 16px; font-size: 18px; color: var(--text-secondary);}

        /* How it Works Section */
        .how-it-works-section { padding: 80px 0; background: var(--bg-primary); }
        .how-header { text-align: center; margin-bottom: 64px; }
        .how-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; letter-spacing: -0.02em; }
        .how-header p { font-size: 20px; color: var(--text-secondary); max-width: 800px; margin: 0 auto; }
        .how-steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px; }
        .how-step { padding: 32px; border: 1px solid var(--border); border-radius: 16px; background: rgba(255,255,255,0.4); transition: all 0.3s ease; }
        .how-step:hover { transform: translateY(-4px); box-shadow: 0 12px 40px var(--shadow); border-color: rgba(139, 107, 71, 0.2); }
        .step-number { font-size: 14px; font-weight: 600; color: var(--accent); margin-bottom: 16px; background: var(--bg-accent); display: inline-block; padding: 4px 12px; border-radius: 20px; }
        .step-title { font-size: 20px; font-weight: 600; margin-bottom: 12px; }
        .step-description { font-size: 16px; color: var(--text-secondary); }

        /* Waitlist Section */
        .waitlist-section { padding: 80px 0; background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%); }
        .waitlist-container { max-width: 600px; margin: 0 auto; text-align: center; }
        .waitlist-header { margin-bottom: 48px; }
        .waitlist-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; }
        .waitlist-header p { font-size: 20px; color: var(--text-secondary); }
        .waitlist-form { background: rgba(255, 255, 255, 0.5); border-radius: 16px; padding: 40px; backdrop-filter: blur(10px); }
        .form-group { margin-bottom: 24px; text-align: left; }
        .form-group input { width: 100%; padding: 14px 20px; border: 2px solid var(--border); border-radius: 8px; background: rgba(255, 255, 255, 0.7); font-size: 15px; font-family: inherit; transition: all 0.3s ease; outline: none; }
        .form-group input:focus { border-color: var(--accent); background: white; box-shadow: 0 0 0 3px rgba(139, 107, 71, 0.1); }
        .submit-button { width: 100%; padding: 16px 32px; background: var(--accent); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .submit-button:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 8px 30px rgba(139, 107, 71, 0.25); }
        .privacy-note { margin-top: 16px; font-size: 14px; color: var(--text-tertiary); }
        .success-checkmark { width: 80px; height: 80px; margin: 0 auto 24px; position: relative; display: none; }
        .success-checkmark.show { display: block; }
        .success-checkmark svg { width: 100%; height: 100%; }
        .success-checkmark .circle { stroke: var(--success); stroke-width: 2; fill: none; stroke-dasharray: 166; stroke-dashoffset: 166; animation: circle 0.6s ease forwards; }
        .success-checkmark .check { stroke: var(--success); stroke-width: 3; fill: none; stroke-dasharray: 48; stroke-dashoffset: 48; animation: check 0.3s ease forwards 0.6s; }
        @keyframes circle { to { stroke-dashoffset: 0; } }
        @keyframes check { to { stroke-dashoffset: 0; } }

        /* Footer */
        footer { background: var(--text-primary); color: rgba(255, 255, 255, 0.9); padding: 64px 0 32px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 48px; margin-bottom: 48px; }
        .footer-section h4 { font-size: 16px; font-weight: 600; margin-bottom: 16px; color: white; }
        .footer-section ul { list-style: none; }
        .footer-section li { margin-bottom: 12px; }
        .footer-section a { color: rgba(255, 255, 255, 0.7); text-decoration: none; font-size: 15px; transition: color 0.3s ease; }
        .footer-section a:hover { color: white; }
        .footer-bottom { border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 32px; text-align: center; font-size: 14px; color: rgba(255, 255, 255, 0.5); }

        /* Animations & Responsive */
        .fade-in { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
        .mobile-menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
        .mobile-menu-toggle span { display: block; width: 24px; height: 2px; background: var(--text-primary); margin-bottom: 6px; transition: all 0.3s ease; }
        @media (max-width: 768px) {
            .nav-links { position: fixed; top: 72px; left: 0; right: 0; background: rgba(250, 248, 245, 0.98); flex-direction: column; padding: 24px; gap: 24px; transform: translateX(-100%); transition: transform 0.3s ease; box-shadow: 0 4px 40px var(--shadow); }
            .nav-links.open { transform: translateX(0); }
            .mobile-menu-toggle { display: block; }
            h1 { font-size: clamp(30px, 10vw, 48px); }
            .url-input { flex-direction: column; }
            .predict-button { width: 100%; }
            .persona-header { flex-direction: column; text-align: center; }
            .two-column-grid { grid-template-columns: 1fr; }
            .playbook-table { font-size: 14px; }
            .playbook-table th, .playbook-table td { padding: 12px 8px; }
            .footer-content { grid-template-columns: 1fr; text-align: center; }
            .persona-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
            .share-badge-grid { grid-template-columns: 1fr; }
            .persona-tabs { flex-wrap: wrap; }
            .tab-link { flex-grow: 1; text-align: center; }
            .executive-summary-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>
    <header id="header">
        <div class="container">
            <nav>
                <div class="logo-container">
                    <a href="/" class="logo">
                        <img src="images/logo1.png" alt="WhyUser" class="logo-image">
                    </a>
                    <span class="tagline">Behavioral OS for Business</span>
                </div>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#how-it-works-section">How It Works</a></li>
                    <li><a href="#waitlist">Early Access</a></li>
                </ul>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <section class="hero" id="heroSection">
        <div class="container">
            <div class="hero-content fade-in">
                <h1> See Your Site Through Your <span class="gradient-text">Buyer's Eyes</span></h1>
                <p class="hero-subtitle"><br>Stop building blind. Get the evidence from <b>AI buyer simulations</b> to end debates and ship what actually converts.</p>

                <div class="analysis-input-section">
                    <h3>Get Your Free Buyer Insight Brief</h3>
                    <div class="url-input">
                        <input type="url" placeholder="Enter your landing page URL..." id="pageUrl">
                        <button class="predict-button" id="analyzeBtn" onclick="runAnalysis()">Analyze My Page</button>
                    </div>
                    <p class="input-context">No GA access needed. Just a URL.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="interactiveDemoSection">
        <div class="container">
            <div id="personaSelectorSection" style="display:none;">
                <div class="section-header">
                    <h2>Buyer Personas Identified</h2>
                    <p>We've identified the key buyer personas for your site. The brief below will be based on these roles.</p>
                </div>
                <div class="persona-grid" id="personaGrid">
                </div>
            </div>

            <div id="briefSection" style="display:none;">
                <div class="section-header" id="reportHeader">
                    <h2>Your Live Buyer Insight Brief</h2>
                    <p>Here's how your key buyer personas actually see your page. No opinions, just simulated behavior.</p>
                </div>
                <div class="results-grid" id="resultsGrid">
                </div>
            </div>

            <div class="analysis-progress" id="analysisProgress" style="display: none;">
                <p>Generating Buyer Personas...</p>
            </div>
        </div>
    </section>

    <section class="how-it-works-section" id="how-it-works-section">
        <div class="container">
            <div class="how-header fade-in">
                <h2>Go From "Guess" to "Evidence" in 3 Steps</h2>
                <p>Our engine uses AI, cognitive science, and chaos modeling to simulate real-world buyer behavior, delivering a clear verdict before you build.</p>
            </div>
            <div class="how-steps-grid">
                <div class="how-step fade-in">
                    <div class="step-number">STEP 1</div>
                    <h3 class="step-title">Page & Persona Analysis</h3>
                    <p class="step-description">We analyze your page's structure, copy, and trust signals, then simulate your core B2B buyer personas (like the Security Guardian or Economic Buyer).</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 2</div>
                    <h3 class="step-title">Behavioral Simulation</h3>
                    <p class="step-description">Hundreds of AI "buyers" navigate your page. We record every virtual click, scroll, and moment of frustration to identify hidden friction points.</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 3</div>
                    <h3 class="step-title">Actionable Buyer Insight Brief</h3>
                    <p class="step-description">You get a one-page summary showing exactly what resonated, what caused confusion, and a prioritized list of fixes to improve conversion.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="waitlist-section" id="waitlist">
        <div class="container">
            <div class="waitlist-container">
                <div class="waitlist-header fade-in">
                    <h2>Get Early Access</h2>
                    <p>Stop debating and start building with evidence. Get your first Buyer Insight Brief for free.</p>
                </div>

                <div class="waitlist-form fade-in">
                    <form id="waitlistForm" onsubmit="submitWaitlist(event)">
                        <div class="form-group">
                            <input type="email" placeholder="Work email" required>
                        </div>
                        <div class="form-group">
                            <input type="text" placeholder="Company name" required>
                        </div>
                        <button type="submit" class="submit-button">Request Early Access</button>
                    </form>
                    <p class="privacy-note">We'll only email about WhyUser updates. No spam.</p>
                </div>

                <div class="success-checkmark" id="successMessage">
                    <svg viewBox="0 0 52 52">
                        <circle class="circle" cx="26" cy="26" r="25" fill="none" />
                        <path class="check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                    <p style="color: var(--success); font-weight: 600;">Thank you! We'll be in touch soon.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>WhyUser</h4>
                    <p style="margin-top: 12px; line-height: 1.6;">See your website through your buyer's eyes. Get AI-driven pre-launch analysis to build pages that convert.</p>
                </div>
                <div class="footer-section">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="#how-it-works-section">How It Works</a></li>
                        <li><a href="#">Pricing</a></li>
                        <li><a href="#">Documentation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WhyUser. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- Static page logic ---
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        mobileMenuToggle.addEventListener('click', () => navLinks.classList.toggle('open'));
        window.addEventListener('scroll', () => { document.getElementById('header').classList.toggle('scrolled', window.scrollY > 100); });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    navLinks.classList.remove('open');
                }
            });
        });
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        function submitWaitlist(event) {
            event.preventDefault();
            document.getElementById('waitlistForm').style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
        }

        // --- Interactive Demo Logic ---
        const analyzeBtn = document.getElementById('analyzeBtn');
        const demoSection = document.getElementById('interactiveDemoSection');
        const personaSelectorSection = document.getElementById('personaSelectorSection');
        const briefSection = document.getElementById('briefSection');
        const resultsGrid = document.getElementById('resultsGrid');
        const analysisProgress = document.getElementById('analysisProgress');
        const personaGrid = document.getElementById('personaGrid');

        // --- Data for Report ---
        const allPersonas = [
            { code: 'EU', name: 'End User', icon: 'üë©‚Äçüíª', role: 'Cares about daily workflow' },
            { code: 'GR', name: 'Security Guardian', icon: 'üõ°Ô∏è', role: 'Vets for risk & compliance' },
            { code: 'TD', name: 'Tech Evaluator', icon: '‚öôÔ∏è', role: 'Validates features & integration' },
            { code: 'CH', name: 'Champion', icon: 'üèÜ', role: 'Advocates for the solution' },
            { code: 'IN', name: 'Influencer', icon: 'üåü', role: 'Shapes opinion with expertise' },
            { code: 'EB', name: 'Economic Buyer', icon: 'üí∞', role: 'Approves budget, focuses on ROI' },
            { code: 'IT', name: 'IT Administrator', icon: 'üñ•Ô∏è', role: 'Manages implementation & infra' },
            { code: 'LS', name: 'Legal/Procurement', icon: '‚öñÔ∏è', role: 'Manages contracts & vendor risk' },
        ];

        const personaDetails = {
            EndUser: {
                id: 'EndUser',
                icon: 'üë©‚Äçüíª',
                name: 'End User',
                fictional_name: 'Maria, Senior Analyst',
                intent_stage: 'Top-of-Funnel (Discovery)',
                mental_model: 'Will this make my daily job easier, or is it just another tool I have to learn and ignore?',
                non_negotiable_needs: ['Must show the UI, not just abstract benefits.', 'Must have a clear "how it works" or video demo.'],
                playbook: [
                    { rank: 1, rec: 'Add animated GIF of core product workflow in the hero', stage: 'ToFu', outcome: '+10% Goal Completion'}, 
                    { rank: 2, rec: 'Change headline to a specific, relatable outcome', stage: 'ToFu', outcome: '-15pts Friction'}
                ],
                path_distribution: [
                    { path: 'HOME ‚Üí /features ‚Üí BOUNCE', stage: 'ToFu', outcome: 'Abandon'}, 
                    { path: 'HOME ‚Üí /features ‚Üí /demo ‚Üí BOUNCE', stage: 'ToFu', outcome: 'Abandon'}
                ],
                messaging_critique: [
                    { current: '"Unlock new efficiencies"', stage: 'ToFu', problem: 'Abstract and meaningless to a user', fix: '"Complete your weekly report in 10 minutes"' }
                ],
                monologue: [
                    { time: '00:02', thought: 'Okay, my boss sent me this. Let\'s see. "Revolutionize your workflow"... ugh, marketing speak.' },
                    { time: '00:06', thought: 'I\'m just trying to see what it *looks* like. Is there a screenshot? A video?' },
                    { time: '00:15', thought: 'Found a "Watch Demo" button. It\'s a 15-minute webinar recording. No thanks.' },
                    { time: '00:22', thought: '<strong>Decision: I can\'t tell if this is useful.</strong> I\'ll tell my boss it "looks interesting" but I have no idea if it actually helps me.' }
                ],
                triggers: [
                    { text: 'Lack of product screenshots or GIFs', sig: 'Critical', runs: 88, intent: 'ToFu' },
                    { text: 'Headline was vague marketing-speak', sig: 'High', runs: 75, intent: 'ToFu' },
                    { text: 'Demo was a long webinar, not a short video', sig: 'Medium', runs: 61, intent: 'ToFu' }
                ],
                drivers: [
                    { text: 'Testimonials from other "Analysts"', sig: 'High', runs: 65, intent: 'ToFu' },
                    { text: '"How it Works" diagram was clear', sig: 'Medium', runs: 55, intent: 'ToFu' }
                ],
            },
            EconomicBuyer: {
                id: 'EconomicBuyer',
                icon: 'üí∞',
                name: 'Economic Buyer',
                fictional_name: 'Ari, Chief Financial Officer',
                intent_stage: 'Bottom-of-Funnel (Purchase)',
                mental_model: 'Every purchase is an investment that must have a clear, quantifiable return. Do not waste my time.',
                non_negotiable_needs: ['Must see pricing or a clear path to it.', 'Must understand the business impact in terms of cost, revenue, or risk.'],
                playbook: [
                    { rank: 1, rec: 'Add a clear, public pricing page or link in nav', stage: 'BoFu', outcome: '+3% EB Conversion'}, 
                    { rank: 2, rec: 'Create an interactive ROI calculator', stage: 'BoFu', outcome: 'Increase qualified lead flow'}
                ],
                path_distribution: [
                    { path: 'HOME ‚Üí BOUNCE', stage: 'BoFu', outcome: 'Veto'}, 
                    { path: 'HOME ‚Üí /case-studies ‚Üí BOUNCE', stage: 'BoFu', outcome: 'Veto'}
                ],
                messaging_critique: [
                    { current: 'Pricing: "Contact Us"', stage: 'BoFu', problem: 'The single biggest deal-killer for a financial buyer.', fix: 'Show a clear pricing table with tiers.' }
                ],
                monologue: [
                    { time: '00:02', thought: 'Okay, the team wants to evaluate this. First question: what does it cost?' },
                    { time: '00:04', thought: 'Scanning the navigation. No "Pricing" link. Red flag.' },
                    { time: '00:12', thought: 'I will not "Book a Demo" to find out the price. This tells me their sales process is inefficient.'},
                    { time: '00:18', thought: '<strong>Decision: This is a non-starter.</strong> No transparent pricing, no clear ROI. Vetoed.' }
                ],
                triggers: [
                    { text: 'No "Pricing" in main navigation', sig: 'Critical', runs: 95, intent: 'BoFu' },
                    { text: 'Case study lacked financial outcomes', sig: 'High', runs: 72, intent: 'BoFu' },
                    { text: 'Value prop not framed in ROI', sig: 'High', runs: 68, intent: 'BoFu' },
                    { text: 'Vague "Contact Us" CTA', sig: 'Medium', runs: 55, intent: 'BoFu' }
                ],
                drivers: [
                    { text: 'ROI Calculator', sig: 'Critical', runs: 90, intent: 'BoFu' },
                    { text: 'Gartner/Forrester logo', sig: 'High', runs: 70, intent: 'BoFu' },
                    { text: 'Customer logos from Fortune 500', sig: 'Medium', runs: 62, intent: 'BoFu' }
                ],
            }
        };        
        
        const briefDividerHTML = `<div class="brief-divider"></div>`;

        function createExecutiveSummaryHTML() {
            return `
            <div class="brief-section" id="executiveSummarySection">
                <div class="section-header" style="margin-bottom: 32px; text-align: left;">
                    <h3 style="font-size: 24px;">1. Executive Summary</h3>
                </div>
                <div class="executive-summary-grid">
                    <div class="summary-card">
                        <div class="stat critical">1%</div>
                        <div class="label">Economic Buyer Conversion</div>
                        <p class="description">A critical lack of pricing and ROI proof causes immediate abandonment for BoFu decision-makers.</p>
                    </div>
                    <div class="summary-card">
                        <div class="stat" style="color: var(--warning);">88%</div>
                        <div class="label">End User Friction</div>
                        <p class="description">Abstract jargon and a lack of UI visuals prevent ToFu users from understanding the product's value.</p>
                    </div>
                    <div class="summary-card">
                        <div class="stat">#1</div>
                        <div class="label">Structural Flaw</div>
                        <p class="description">The page fails because it doesn't serve the distinct needs of users in different buying stages.</p>
                    </div>
                </div>
            </div>`;
        }

        function createPerformanceSummaryHTML() {
            return `
            <div class="brief-section" id="performanceSummarySection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">2. Holistic Performance Scoreboard</h3>
                </div>
                <p style="font-size: 16px; color: var(--text-tertiary);">High-level summary across all key buyer personas and their simulated intent stages.</p>
                <table class="scoreboard-table">
                <thead><tr><th>Persona / Intent Stage</th><th>Traffic Weight</th><th>Simulated Goal Completion</th><th>Friction Score (Consistency)</th><th>Key Blocker</th></tr></thead>
                <tbody>
                    <tr><td>üí∞ Economic Buyer / BoFu</td><td>10%</td><td><strong>1%</strong></td><td><strong class="critical-blocker">92</strong> (95/100 runs)</td><td class="critical-blocker">No Transparent Pricing/ROI</td></tr>
                    <tr><td>üë©‚Äçüíª End User / ToFu</td><td>35%</td><td>12%</td><td><strong class="critical-blocker" style="color:var(--warning)">45</strong> (88/100 runs)</td><td>Abstract Jargon, No UI Visuals</td></tr>
                    <tr><td>üèÜ Champion / MoFu</td><td>22%</td><td>18%</td><td>35 (40/100 runs)</td><td>-</td></tr>
                    <tr><td>‚öôÔ∏è Tech Evaluator / MoFu</td><td>18%</td><td>4%</td><td>65 (86/100 runs)</td><td>Form Friction & Vague Copy</td></tr>
                    <tr><td>üõ°Ô∏è Security Guardian / BoFu</td><td>15%</td><td><strong>0%</strong></td><td>88 (93/100 runs)</td><td>Missing Trust Signals</td></tr>
                </tbody>
                </table>
            </div>
            `;
        }

        function createJourneyAnalysisHTML() {
            return `
            <div class="brief-section" id="journeyAnalysisSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">3. Journey Analysis: Expected vs. Actual</h3>
                </div>
                <table class="details-table">
                    <thead>
                        <tr><th>Persona & Intent</th><th>Canonical (Expected) Path</th><th>Simulated (Actual) Path</th><th>Diagnosis</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>üí∞ Economic Buyer</strong><br><em style="color:var(--text-tertiary)">Bottom-of-Funnel</em></td>
                            <td>Home ‚Üí Pricing ‚Üí ROI Calculator ‚Üí Demo CTA</td>
                            <td>Home ‚Üí <strong class="critical-blocker">BOUNCE</strong></td>
                            <td><strong class="fail-verdict">FAIL:</strong> Page failed to surface a "Pricing" link, breaking the justification journey at step 2.</td>
                        </tr>
                        <tr>
                            <td><strong>üë©‚Äçüíª End User</strong><br><em style="color:var(--text-tertiary)">Top-of-Funnel</em></td>
                            <td>Home ‚Üí Features ‚Üí Watch 2-min Video ‚Üí Blog</td>
                            <td>Home ‚Üí Features ‚Üí <strong class="critical-blocker">BOUNCE</strong></td>
                            <td><strong class="fail-verdict">FAIL:</strong> The "Features" page used abstract jargon, causing user to abandon before finding the video proof.</td>
                        </tr>
                    </tbody>
                </table>
            </div>`;
        }
        
        function createAbandonmentPointsHTML() {
             return `
            <div class="brief-section" id="abandonmentPointsSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">4. Key Journey Abandonment Points</h3>
                </div>
                 <table class="path-analysis-table">
                    <thead><tr><th>Journey Step (Path)</th><th>üí∞ EB / BoFu</th><th>üë©‚Äçüíª EU / ToFu</th><th>üèÜ CH / MoFu</th><th>‚öôÔ∏è TE / MoFu</th><th>üõ°Ô∏è SG / BoFu</th></tr></thead>
                    <tbody>
                        <tr><td>Home Page</td><td><strong class="critical-blocker">95% Abd.</strong></td><td>15% Abd.</td><td>0% Abd.</td><td>0% Abd.</td><td><strong class="critical-blocker">93% Abd.</strong></td></tr>
                        <tr><td style="padding-left: 24px;">‚Üí Product Page</td><td>-</td><td>25% Abd.</td><td>2% Abd.</td><td>5% Abd.</td><td>-</td></tr>
                        <tr><td style="padding-left: 24px;">‚Üí Pricing Page</td><td>-</td><td>10% Abd.</td><td>5% Abd.</td><td>15% Abd.</td><td>-</td></tr>
                        <tr><td style="padding-left: 24px;">‚Üí Demo Form</td><td>-</td><td><strong class="critical-blocker">50% Abd.</strong></td><td>10% Abd.</td><td><strong class="critical-blocker">85% Abd.</strong></td><td>-</td></tr>
                    </tbody>
                </table>
            </div>
            `;
        }

        function createSequencingFlawsHTML() {
            return `
            <div class="brief-section" id="sequencingFlawsSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">5. Content Sequencing Violations</h3>
                </div>
                <table class="details-table">
                    <thead>
                        <tr><th>Persona / Stage</th><th>Sequencing Error</th><th>The Fix</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>üí∞ Economic Buyer</strong><br><em style="color:var(--text-tertiary)">BoFu</em></td>
                            <td>üö® Presented "Book a Demo" (The Ask) before "Pricing" (The Justification).</td>
                            <td style="color: var(--success)">Surface pricing information before a high-friction CTA.</td>
                        </tr>
                        <tr>
                            <td><strong>üë©‚Äçüíª End User</strong><br><em style="color:var(--text-tertiary)">ToFu</em></td>
                            <td>‚ö†Ô∏è Presented "Benefits" copy before a "Product UI Visual" (The Proof).</td>
                             <td style="color: var(--success)">Show the product in action (GIF/video) in the hero.</td>
                        </tr>
                    </tbody>
                </table>
            </div>`;
        }

        function createHeatMapHTML() {
            return `
            <div class="brief-section" id="heatMapSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">6. Page-Level Friction Hotspots</h3>
                </div>
                <table class="heat-map-table">
                    <thead> <tr> <th>Persona / Intent Stage</th> <th>HOME</th> <th>/PRODUCT</th> <th>/PRICING</th> <th>/DEMO FORM</th> </tr> </thead>
                    <tbody>
                        <tr> <td>üí∞ EB / BoFu</td> <td class="friction-cell"><span class="friction-high">‚ñà 92</span></td> <td class="friction-cell"><span class="friction-high">‚ñà 85</span></td> <td>-</td> <td>-</td> </tr>
                        <tr> <td>üë©‚Äçüíª EU / ToFu</td> <td class="friction-cell"><span class="friction-low">‚ñà 35</span></td> <td class="friction-cell"><span class="friction-med">‚ñà 48</span></td> <td class="friction-cell"><span class="friction-low">‚ñà 30</span></td> <td class="friction-cell"><span class="friction-med">‚ñà 55</span></td> </tr>
                        <tr> <td>üèÜ CH / MoFu</td> <td class="friction-cell"><span class="friction-low">‚ñà 15</span></td> <td class="friction-cell"><span class="friction-low">‚ñà 20</span></td> <td class="friction-cell"><span class="friction-low">‚ñà 25</span></td> <td class="friction-cell"><span class="friction-low">‚ñà 35</span></td> </tr>
                        <tr> <td>‚öôÔ∏è TE / MoFu</td> <td class="friction-cell"><span class="friction-low">‚ñà 25</span></td> <td class="friction-cell"><span class="friction-med">‚ñà 55</span></td> <td class="friction-cell"><span class="friction-med">‚ñà 61</span></td> <td class="friction-cell"><span class="friction-high">‚ñà 91</span></td> </tr>
                        <tr> <td>üõ°Ô∏è SG / BoFu</td> <td class="friction-cell"><span class="friction-high">‚ñà 88</span></td> <td class="friction-cell"><span class="friction-med">‚ñà 45</span></td> <td>-</td> <td>-</td> </tr>
                    </tbody>
                </table>
                <div class="heat-map-legend"><span>Friction Score: <span class="friction-high">High</span>, <span class="friction-med">Medium</span>, <span class="friction-low">Low</span></span></div>
            </div>`;
        }
        
        function createPlaybookHTML() {
            return `
            <div class="brief-section playbook-section" id="playbookSection">
                <div class="playbook-title">
                    <h3 style="font-size: 24px;">7. Top 3 Prioritized Quick-Win Playbook</h3>
                    <p style="font-size: 16px; color: var(--text-secondary);">This is your data-driven backlog. Fix these structural issues to win over your key personas.</p>
                </div>
                <table class="playbook-table">
                    <thead><tr><th>Rank</th><th>Recommendation</th><th>Value Score</th><th>Persona / Stage</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td><strong>Add a clear, public pricing page or link in nav</strong></td><td class="value-score" style="color:var(--success)">95</td><td>Economic Buyer / BoFu</td></tr>
                        <tr><td>2</td><td>Add an animated GIF of the core product workflow in the hero banner</td><td class="value-score" style="color:var(--success)">88</td><td>End User / ToFu</td></tr>
                        <tr><td>3</td><td>Create an interactive ROI calculator accessible from the main navigation</td><td class="value-score" style="color:var(--warning)">80</td><td>Economic Buyer / BoFu</td></tr>
                    </tbody>
                </table>
            </div>`;
        }

        function createPersonaPlaybookHTML(persona) {
            if (!persona.playbook) return '';
            return `
                 <div class="detail-card">
                    <h4>Persona-Specific Playbook</h4>
                     <table class="details-table">
                       <thead><tr><th>Rank</th><th>Recommendation</th><th>Relevant Stage</th><th>Expected Outcome</th></tr></thead>
                       <tbody>${persona.playbook.map(p => `<tr><td>${p.rank}</td><td><strong>${p.rec}</strong></td><td>${p.stage}</td><td>${p.outcome}</td></tr>`).join('')}</tbody>
                    </table>
                </div>`;
        }

        function createPathDistributionHTML(persona) {
            if (!persona.path_distribution) return '';
            return `
                <div class="detail-card">
                    <h4>Path Distribution</h4>
                    <table class="details-table">
                    <thead><tr><th>Path</th><th>Stage</th><th>Outcome</th></tr></thead>
                    <tbody>${persona.path_distribution.map(p => `
                        <tr>
                            <td>${p.path}</td>
                            <td>${p.stage}</td>
                            <td>${p.outcome}</td>
                        </tr>
                    `).join('')}</tbody>
                    </table>
                </div>`;
        }

        function createMessagingCritiqueHTML(persona) {
            if (!persona.messaging_critique) return '';
            return `
                <div class="detail-card">
                    <h4>Messaging Critique & Copy Fixes</h4>
                    <table class="details-table">
                        <thead>
                            <tr><th>Current Copy</th><th>Relevant Stage</th><th>The Problem</th><th>The Fix</th></tr>
                        </thead>
                        <tbody>
                            ${persona.messaging_critique.map(issue => `
                                <tr>
                                    <td style="color: var(--error);">${issue.current}</td>
                                    <td>${issue.stage}</td>
                                    <td>${issue.problem}</td>
                                    <td style="color: var(--success); font-weight: 600;">${issue.fix}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>`;
        }
        
        function createBehavioralTriggersAndDriversHTML(persona) {
            return `
             <div class="detail-card">
                <p style="font-size:14px; color:var(--text-tertiary); margin-top:-12px; margin-bottom:16px;">
                    Analysis of the most impactful events across 100 simulations. High consistency indicates a reliable and predictable behavioral pattern.
                </p>
                <div class="two-column-grid">
                    <div>
                        <h4>Top 5 Abandonment Triggers</h4>
                        <table class="details-table">
                         <thead><tr><th>Trigger Event</th><th>Intent Stage</th><th>Consistency</th></tr></thead>
                        <tbody>${persona.triggers.map(t => `<tr><td>${t.text} <em style="color:var(--text-tertiary)">(${t.sig})</em></td><td>${t.intent}</td><td><strong>${t.runs}%</strong></td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                    <div>
                        <h4>Top 5 Engagement Drivers</h4>
                        <table class="details-table">
                         <thead><tr><th>Driver Event</th><th>Intent Stage</th><th>Consistency</th></tr></thead>
                        <tbody>${persona.drivers.map(d => `<tr><td>${d.text} <em style="color:var(--text-tertiary)">(${d.sig})</em></td><td>${d.intent}</td><td><strong>${d.runs}%</strong></td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                </div>
            </div>
            `;
        }
        
        function createPersonaScoreBadgeHTML(persona) {
            if (persona.id === 'EconomicBuyer') {
                return `
                <div class="persona-score-badge">
                    <div class="score-title">Financial Readiness Score</div>
                    <div class="score" style="color: var(--error);">8 / 100</div>
                    <div class="score-subtitle">Bottom 5th %tile for ROI Clarity</div>
                </div>`;
            } else {
                return `
                <div class="persona-score-badge">
                    <div class="score-title">Usability & Proof Score</div>
                    <div class="score" style="color: var(--warning);">38 / 100</div>
                    <div class="score-subtitle">Bottom 20th %tile for UI Clarity</div>
                </div>`;
            }
        }
        
        function createPersonaProfileHTML(persona) {
             return `
                <div class="detail-card">
                    <h4>A. Persona Profile</h4>
                     <p style="margin-bottom: 16px;"><strong>Mental Model:</strong> <em>"${persona.mental_model}"</em></p>
                    <ul class="worldview-list">
                       ${persona.non_negotiable_needs.map(need => `<li><strong>Non-Negotiable:</strong> ${need}</li>`).join('')}
                    </ul>
                </div>
             `;
        }

        function createInnerMonologueHTML(persona) {
            if (!persona.monologue) return '';
            return `
                <div class="detail-card">
                    <h4>Inner Monologue Timeline (Sample Run)</h4>
                    <table class="monologue-table">
                        <tbody>
                            ${persona.monologue.map(step => `
                                <tr>
                                    <td class="monologue-time">${step.time}</td>
                                    <td class="monologue-thought">${step.thought}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>`;
        }
        
        function createPersonaDashboardHTML(persona) {
            return `
            <div class="persona-dashboard-grid">
                <div class="persona-header">
                    <div class="persona-icon">${persona.icon}</div>
                    <div class="persona-title-group">
                        <h3 class="persona-name">${persona.name}</h3>
                        <p class="persona-fictional-name">${persona.fictional_name}</p>
                        <p style="font-weight: 600; color: var(--accent); margin-top: 8px;">Simulated Intent: ${persona.intent_stage}</p>
                    </div>
                </div>

                <div class="two-column-grid">
                    ${createPersonaProfileHTML(persona)}
                    ${createPersonaScoreBadgeHTML(persona)}
                </div>
                ${createPersonaPlaybookHTML(persona)}
                ${createPathDistributionHTML(persona)}
                ${createMessagingCritiqueHTML(persona)}
                ${createBehavioralTriggersAndDriversHTML(persona)}
                ${createInnerMonologueHTML(persona)}
            </div>`;
        }
        
        function createShareBadgeHTML() {
            const mailtoSubject = "Evidence to unblock our landing page";
            const mailtoBody = "Team,%0A%0AI ran our landing page through an AI buyer simulation. The results for our 'Economic Buyer' persona are critical.%0A%0AThe page completely fails to provide pricing or ROI information, causing a 95% bounce rate for this persona. This is likely a key reason our enterprise deals are stalling.%0A%0ALet's discuss the recommended fixes from the attached brief.";
            const mailtoLink = `mailto:?subject=${encodeURIComponent(mailtoSubject)}&body=${encodeURIComponent(mailtoBody)}`;

            return `
            <div class="brief-section" id="shareBadgeSection">
                 <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">9. Shareable Evidence</h3>
                </div>
                <div class="share-badge-container">
                    <div class="share-badge-text">
                        <p><strong>Arm your team with objective evidence.</strong> Use the pre-filled email to end subjective debates and get stakeholder buy-in to fix structural flaws.</p>
                        <a href="${mailtoLink}" class="predict-button" style="font-size: 15px; padding: 12px 24px;">Share Report Internally</a>
                    </div>
                </div>
            </div>`;
        }
        
        function createConfidenceMethodologyHTML() {
            return `
            <div class="brief-section" id="confidenceSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">10. Report Confidence & Methodology</h3>
                </div>
                <div style="background: rgba(139, 107, 71, 0.05); border: 1px solid var(--border); border-radius: 8px; padding: 24px;">
                    <h4 style="margin-bottom: 16px;">Simulation Confidence: <span style="color: var(--success);">High</span></h4>
                    <p style="margin-bottom: 16px;">The primary abandonment signals for the Economic Buyer were consistent across >90% of simulations, indicating a stable and reliable result.</p>
                    
                    <h4 style="margin-bottom: 8px;">Methodology</h4>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="margin-bottom: 8px;">‚Ä¢ <strong>Intent Modeling:</strong> Each persona is simulated at a specific funnel stage (ToFu/MoFu/BoFu) which dictates their goals and friction tolerance.</li>
                        <li style="margin-bottom: 8px;">‚Ä¢ <strong>Variance Scoring:</strong> "Consistency" shows the percentage of 100 simulations where a specific behavior occurred, adding statistical weight to findings.</li>
                        <li style="margin-bottom: 8px;">‚Ä¢ <strong>Path Analysis:</strong> Simulated journeys are compared against a "Canonical Path" to diagnose structural and sequencing flaws.</li>
                    </ul>
                </div>
            </div>`;
        }

        async function runAnalysis() {
            const url = document.getElementById('pageUrl').value; 
            if (!url || !url.startsWith('http')) { 
                alert('Please enter a valid URL (e.g., https://example.com).'); 
                return; 
            }
            
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = 'Analyzing...';
            demoSection.style.display = 'block'; 
            briefSection.style.display = 'none';
            personaSelectorSection.style.display = 'none';
            demoSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            resultsGrid.innerHTML = '';
            personaGrid.innerHTML = '';
            analysisProgress.style.display = 'block'; 
            analysisProgress.querySelector('p').textContent = 'Generating Buyer Personas...';

            await new Promise(resolve => setTimeout(resolve, 1500));
            
            analysisProgress.style.display = 'none'; 
            personaSelectorSection.style.display = 'block';
            
            const selectedPersonas = ['End User', 'Economic Buyer', 'Champion', 'Tech Evaluator', 'Security Guardian'];
            allPersonas.forEach(p => {
                const card = document.createElement('div'); 
                card.className = 'persona-selector-card';
                if (selectedPersonas.includes(p.name)) { card.classList.add('selected'); }
                card.innerHTML = `<div class="persona-selector-icon">${p.icon}</div><div class="persona-selector-name">${p.name}</div><p class="persona-selector-role">${p.role}</p>`;
                personaGrid.appendChild(card);
            });
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            briefSection.style.display = 'block'; 
            resultsGrid.innerHTML = `<div class="master-brief-card" id="masterBriefCard"></div>`;
            const masterCard = document.getElementById('masterBriefCard');
            
            const executiveSummaryHTML = createExecutiveSummaryHTML();
            const performanceSummaryHTML = createPerformanceSummaryHTML();
            const journeyAnalysisHTML = createJourneyAnalysisHTML();
            const abandonmentPointsHTML = createAbandonmentPointsHTML();
            const sequencingFlawsHTML = createSequencingFlawsHTML();
            const heatMapHTML = createHeatMapHTML();
            const playbookHTML = createPlaybookHTML();
            const personaTabsHTML = `
                <div class="brief-section" id="personaDashboards">
                    <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                        <h3 style="font-size: 24px;">8. Detailed Persona Dashboards</h3>
                    </div>
                    <div class="persona-tabs">
                        <div class="tab-link active" data-tab="EconomicBuyer">üí∞ Economic Buyer</div>
                        <div class="tab-link" data-tab="EndUser">üë©‚Äçüíª End User</div>
                    </div>
                    <div class="tab-content-wrapper">
                        <div class="tab-content active" id="tab-EconomicBuyer">
                            ${createPersonaDashboardHTML(personaDetails.EconomicBuyer)}
                        </div>
                        <div class="tab-content" id="tab-EndUser">
                            ${createPersonaDashboardHTML(personaDetails.EndUser)}
                        </div>
                    </div>
                </div>`;
            const shareBadgeHTML = createShareBadgeHTML();
            const confidenceHTML = createConfidenceMethodologyHTML();

            const reportHTML = [
                executiveSummaryHTML,
                performanceSummaryHTML,
                journeyAnalysisHTML,
                abandonmentPointsHTML,
                sequencingFlawsHTML,
                heatMapHTML,
                playbookHTML,
                personaTabsHTML,
                shareBadgeHTML,
                confidenceHTML
            ].join(briefDividerHTML);
            
            masterCard.innerHTML = reportHTML;

            await new Promise(resolve => setTimeout(resolve, 100));
            masterCard.classList.add('visible');

            setupUIInteractions();
            briefSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            analyzeBtn.disabled = false;
            analyzeBtn.textContent = 'Analyze My Page';
        }

        function setupUIInteractions() {
            document.addEventListener('click', function(event) {
                const clickedTab = event.target.closest('.tab-link');
                if (!clickedTab) return;
                
                const tabId = clickedTab.getAttribute('data-tab');
                if (!tabId) return;
                
                const tabContainer = clickedTab.closest('.persona-tabs');
                const tabContentWrapper = tabContainer.nextElementSibling;
                
                tabContainer.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
                tabContentWrapper.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                clickedTab.classList.add('active');

                const activeContent = document.getElementById(`tab-${tabId}`);
                if (activeContent) {
                    activeContent.classList.add('active');
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', setupUIInteractions);
    </script>
</body>
</html>