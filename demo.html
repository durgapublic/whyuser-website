<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhyUser - Stop Building Blind</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-primary: #faf8f5;
            --bg-secondary: rgba(246, 243, 238, 0.8);
            --bg-accent: rgba(235, 227, 215, 0.3);
            --text-primary: #1a1816;
            --text-secondary: #4a453f;
            --text-tertiary: #726a5f;
            --accent: #8b6b47;
            --accent-hover: #735639;
            --success: #22863a;
            --error: #dc3545;
            --warning: #f59e0b;
            --border: rgba(139, 107, 71, 0.1);
            --shadow: rgba(26, 24, 22, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(250, 248, 245, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        header.scrolled {
            background: rgba(250, 248, 245, 0.95);
            box-shadow: 0 2px 40px var(--shadow);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 72px;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
        }

        .logo-image {
            height: 48px;
            width: auto;
            display: block;
            transition: opacity 0.3s ease;
        }

        .logo:hover .logo-image {
            opacity: 0.7;
        }

        .tagline {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .nav-links {
            display: flex;
            gap: 36px;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            padding: 140px 0 80px;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -25%;
            width: 70%;
            height: 150%;
            background: radial-gradient(circle, rgba(139, 107, 71, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .hero-content {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: clamp(36px, 7vw, 60px);
            font-weight: 600;
            line-height: 1.05;
            letter-spacing: -0.03em;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--accent) 0%, var(--error) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 24px;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 48px;
            line-height: 1.5;
        }
        
        /* Analysis Input Section */
        .analysis-input-section {
            padding: 40px;
            background: rgba(255,255,255,0.5);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 10px 40px var(--shadow);
            backdrop-filter: blur(10px);
        }
        
        h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            text-align: center;
        }

        .url-input {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .url-input input {
            flex: 1;
            padding: 18px 24px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        .url-input input:focus {
            border-color: var(--accent);
            background: white;
            box-shadow: 0 0 0 4px rgba(139, 107, 71, 0.1);
        }

        .predict-button {
            padding: 18px 36px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .predict-button:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(139, 107, 71, 0.3);
        }
        
        .predict-button:disabled {
            background: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .input-context {
            font-size: 14px;
            color: var(--text-tertiary);
            text-align: center;
            margin-top: 24px;
        }
        
        /* Interactive Demo Section */
        #interactiveDemoSection {
            display: none;
            padding: 80px 0;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .section-header h2 {
            font-size: 48px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .section-header p {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .analysis-progress {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .analysis-progress p {
            font-size: 20px;
            font-weight: 500;
            color: var(--text-secondary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        #personaSelectorSection {
            display: none;
        }
        .persona-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }
        .persona-selector-card {
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.4);
        }
        .persona-selector-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px var(--shadow);
            border-color: var(--accent);
        }
        .persona-selector-card.selected {
            border-color: var(--accent);
            background: var(--bg-accent);
            box-shadow: 0 8px 30px rgba(139, 107, 71, 0.1);
            transform: translateY(-2px);
        }
        .persona-selector-icon { font-size: 32px; margin-bottom: 12px; }
        .persona-selector-name { font-weight: 600; color: var(--text-primary); }
        .persona-selector-role { font-size: 14px; color: var(--text-tertiary); min-height: 40px; }
        
        #briefSection {
            display: none;
            margin-top: 64px;
        }

        /* Unified report card styling */
        .master-brief-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 16px 50px var(--shadow);
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .master-brief-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .brief-section {
            opacity: 1; /* Make sections visible by default within the card */
        }
        .brief-divider {
            border-top: 1px solid var(--border);
            margin: 40px 0;
        }

        /* Executive Summary & Scoreboard */
        .executive-summary-list { list-style: none; padding-left: 0; }
        .executive-summary-list li { font-size: 18px; color: var(--text-secondary); margin-bottom: 16px; padding-left: 30px; position: relative; }
        .executive-summary-list li:last-child { margin-bottom: 0; }
        .executive-summary-list li::before { content: '⚡'; position: absolute; left: 0; top: 2px; font-size: 18px; }
        .scoreboard-table, .details-table, .path-analysis-table { width: 100%; border-collapse: collapse; font-size: 15px; margin-top: 24px; }
        .scoreboard-table th, .scoreboard-table td, .details-table th, .details-table td, .path-analysis-table th, .path-analysis-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
        .scoreboard-table th, .details-table th, .path-analysis-table th { color: var(--text-secondary); font-weight: 500; font-size: 14px; }
        .scoreboard-table td:first-child, .details-table td:first-child, .path-analysis-table td:first-child { font-weight: 600; }
        .path-analysis-table td { font-family: 'SF Mono', monospace; }
        .critical-blocker { color: var(--error); font-weight: 500; }
        .fail-verdict { background: rgba(220, 53, 69, 0.05); color: var(--error); font-weight: bold; border-radius: 4px; padding: 2px 6px; display: inline-block; }


        /* Heat Map Section */
        .heat-map-table { width: 100%; border-collapse: collapse; font-family: 'SF Mono', monospace; font-size: 14px; }
        .heat-map-table th, .heat-map-table td { padding: 12px; text-align: left; }
        .heat-map-table th { color: var(--text-tertiary); }
        .heat-map-table td:first-child { font-weight: 600; }
        .heat-map-table .friction-cell { font-weight: bold; }
        .friction-high { color: var(--error); }
        .friction-med { color: var(--warning); }
        .friction-low { color: var(--success); }
        .heat-map-legend { margin-top: 16px; text-align: center; font-size: 14px; color: var(--text-tertiary); }
        .heat-map-legend span { margin: 0 12px; }

        /* Tabs for Personas */
        .persona-tabs { display: flex; border-bottom: 2px solid var(--border); margin-bottom: 32px; }
        .tab-link { padding: 12px 20px; cursor: pointer; font-weight: 600; font-size: 16px; color: var(--text-tertiary); position: relative; border-bottom: 4px solid transparent; transition: all 0.3s ease; }
        .tab-link:hover { color: var(--text-primary); }
        .tab-link.active { color: var(--text-primary); border-bottom-color: var(--accent); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Persona Snapshot Section */
        .persona-variance-bar-container { width: 100%; height: 8px; background: var(--bg-accent); border-radius: 4px; margin-top: 8px; }
        .persona-variance-bar { height: 100%; border-radius: 4px; transition: width 0.5s ease-out; }
        .variance-consistent { background: var(--success); }
        .variance-moderate { background: var(--warning); }
        .variance-variable { background: var(--error); }

        .persona-score-badge { font-family: 'SF Mono', monospace; border: 2px solid var(--border); padding: 24px; border-radius: 8px; background: var(--bg-primary); text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center;}
        .persona-score-badge .score { font-size: 32px; font-weight: 600; color: var(--error); }
        .persona-score-badge .score-title { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--text-secondary); letter-spacing: 0.5px; text-transform: uppercase;}
        .persona-score-badge .score-subtitle { font-size: 14px; color: var(--text-tertiary); }
        
        .persona-dashboard-grid { display: grid; grid-template-columns: 1fr; gap: 32px; }
        .persona-vitals-table { width: 100%; margin-bottom: 24px; }
        .persona-header { display: flex; align-items: center; gap: 24px; border-bottom: 1px solid var(--border); padding-bottom: 24px; margin-bottom: 24px;}
        .persona-icon { font-size: 48px; background: var(--bg-accent); width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%; flex-shrink: 0; }
        .persona-title-group { flex: 1; }
        .persona-name { font-size: 24px; font-weight: 600; color: var(--text-primary); }
        .persona-fictional-name { font-size: 16px; color: var(--text-secondary); }
        .two-column-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; align-items: start; }
        .detail-card h4 { font-size: 20px; font-weight: 600; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 8px; }
        .worldview-list { list-style: none; padding-left: 0; }
        .worldview-list li { margin-bottom: 12px; padding-left: 24px; position: relative; color: var(--text-secondary); }
        .worldview-list li::before { content: '🧠'; position: absolute; left: 0; top: 1px; }
        .worldview-list li strong { color: var(--text-primary); }
        
        /* Playbook Section */
        .playbook-section { border: 2px solid var(--success); background: rgba(34, 134, 58, 0.03); border-radius: 12px; padding: 32px; }
        .playbook-title { text-align: left; margin-bottom: 24px; }
        .playbook-title h3 { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        .playbook-table { width: 100%; border-collapse: collapse; }
        .playbook-table th, .playbook-table td { padding: 16px; text-align: left; border-bottom: 1px solid var(--border); }
        .playbook-table th { color: var(--text-secondary); font-weight: 500; font-size: 14px; }
        .value-score { font-weight: 700; font-size: 16px; }
        .playbook-note { font-size: 14px; color: var(--text-tertiary); margin-top: 16px; font-style: italic; }

        /* Share Badge Section */
        .share-badge-container { text-align: center; }
        .share-badge-text p { margin: 0 0 16px; font-size: 18px; color: var(--text-secondary);}

        /* How it Works Section */
        .how-it-works-section { padding: 80px 0; background: var(--bg-primary); }
        .how-header { text-align: center; margin-bottom: 64px; }
        .how-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; letter-spacing: -0.02em; }
        .how-header p { font-size: 20px; color: var(--text-secondary); max-width: 800px; margin: 0 auto; }
        .how-steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px; }
        .how-step { padding: 32px; border: 1px solid var(--border); border-radius: 16px; background: rgba(255,255,255,0.4); transition: all 0.3s ease; }
        .how-step:hover { transform: translateY(-4px); box-shadow: 0 12px 40px var(--shadow); border-color: rgba(139, 107, 71, 0.2); }
        .step-number { font-size: 14px; font-weight: 600; color: var(--accent); margin-bottom: 16px; background: var(--bg-accent); display: inline-block; padding: 4px 12px; border-radius: 20px; }
        .step-title { font-size: 20px; font-weight: 600; margin-bottom: 12px; }
        .step-description { font-size: 16px; color: var(--text-secondary); }

        /* Waitlist Section */
        .waitlist-section { padding: 80px 0; background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%); }
        .waitlist-container { max-width: 600px; margin: 0 auto; text-align: center; }
        .waitlist-header { margin-bottom: 48px; }
        .waitlist-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; }
        .waitlist-header p { font-size: 20px; color: var(--text-secondary); }
        .waitlist-form { background: rgba(255, 255, 255, 0.5); border-radius: 16px; padding: 40px; backdrop-filter: blur(10px); }
        .form-group { margin-bottom: 24px; text-align: left; }
        .form-group input { width: 100%; padding: 14px 20px; border: 2px solid var(--border); border-radius: 8px; background: rgba(255, 255, 255, 0.7); font-size: 15px; font-family: inherit; transition: all 0.3s ease; outline: none; }
        .form-group input:focus { border-color: var(--accent); background: white; box-shadow: 0 0 0 3px rgba(139, 107, 71, 0.1); }
        .submit-button { width: 100%; padding: 16px 32px; background: var(--accent); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .submit-button:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 8px 30px rgba(139, 107, 71, 0.25); }
        .privacy-note { margin-top: 16px; font-size: 14px; color: var(--text-tertiary); }
        .success-checkmark { width: 80px; height: 80px; margin: 0 auto 24px; position: relative; display: none; }
        .success-checkmark.show { display: block; }
        .success-checkmark svg { width: 100%; height: 100%; }
        .success-checkmark .circle { stroke: var(--success); stroke-width: 2; fill: none; stroke-dasharray: 166; stroke-dashoffset: 166; animation: circle 0.6s ease forwards; }
        .success-checkmark .check { stroke: var(--success); stroke-width: 3; fill: none; stroke-dasharray: 48; stroke-dashoffset: 48; animation: check 0.3s ease forwards 0.6s; }
        @keyframes circle { to { stroke-dashoffset: 0; } }
        @keyframes check { to { stroke-dashoffset: 0; } }

        /* Footer */
        footer { background: var(--text-primary); color: rgba(255, 255, 255, 0.9); padding: 64px 0 32px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 48px; margin-bottom: 48px; }
        .footer-section h4 { font-size: 16px; font-weight: 600; margin-bottom: 16px; color: white; }
        .footer-section ul { list-style: none; }
        .footer-section li { margin-bottom: 12px; }
        .footer-section a { color: rgba(255, 255, 255, 0.7); text-decoration: none; font-size: 15px; transition: color 0.3s ease; }
        .footer-section a:hover { color: white; }
        .footer-bottom { border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 32px; text-align: center; font-size: 14px; color: rgba(255, 255, 255, 0.5); }

        /* Animations & Responsive */
        .fade-in { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
        .mobile-menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
        .mobile-menu-toggle span { display: block; width: 24px; height: 2px; background: var(--text-primary); margin-bottom: 6px; transition: all 0.3s ease; }
        @media (max-width: 768px) {
            .nav-links { position: fixed; top: 72px; left: 0; right: 0; background: rgba(250, 248, 245, 0.98); flex-direction: column; padding: 24px; gap: 24px; transform: translateX(-100%); transition: transform 0.3s ease; box-shadow: 0 4px 40px var(--shadow); }
            .nav-links.open { transform: translateX(0); }
            .mobile-menu-toggle { display: block; }
            h1 { font-size: clamp(30px, 10vw, 48px); }
            .url-input { flex-direction: column; }
            .predict-button { width: 100%; }
            .persona-header { flex-direction: column; text-align: center; }
            .two-column-grid { grid-template-columns: 1fr; }
            .playbook-table { font-size: 14px; }
            .playbook-table th, .playbook-table td { padding: 12px 8px; }
            .footer-content { grid-template-columns: 1fr; text-align: center; }
            .persona-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
            .share-badge-grid { grid-template-columns: 1fr; }
            .persona-tabs { flex-wrap: wrap; }
            .tab-link { flex-grow: 1; text-align: center; }
        }
    </style>
</head>

<body>
    <header id="header">
        <div class="container">
            <nav>
                <div class="logo-container">
                    <a href="/" class="logo">
                        <img src="images/logo1.png" alt="WhyUser" class="logo-image">
                    </a>
                    <span class="tagline">Behavioral OS for Business</span>
                </div>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#how-it-works-section">How It Works</a></li>
                    <li><a href="#waitlist">Early Access</a></li>
                </ul>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <section class="hero" id="heroSection">
        <div class="container">
            <div class="hero-content fade-in">
                <h1> See Your Site Through Your <span class="gradient-text">Buyer's Eyes</span></h1>
                <p class="hero-subtitle"><br>Stop building blind. Get the evidence from <b>AI buyer simulations</b> to end debates and ship what actually converts.</p>

                <div class="analysis-input-section">
                    <h3>Get Your Free Buyer Insight Brief</h3>
                    <div class="url-input">
                        <input type="url" placeholder="Enter your landing page URL..." id="pageUrl">
                        <button class="predict-button" id="analyzeBtn" onclick="runAnalysis()">Analyze My Page</button>
                    </div>
                    <p class="input-context">No GA access needed. Just a URL.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="interactiveDemoSection">
        <div class="container">
            <div id="personaSelectorSection" style="display:none;">
                <div class="section-header">
                    <h2>Buyer Personas Identified</h2>
                    <p>We've identified the key buyer personas for your site. The brief below will be based on these roles.</p>
                </div>
                <div class="persona-grid" id="personaGrid">
                </div>
            </div>

            <div id="briefSection" style="display:none;">
                <div class="section-header" id="reportHeader">
                    <h2>Your Live Buyer Insight Brief</h2>
                    <p>Here's how your key buyer personas actually see your page. No opinions, just simulated behavior.</p>
                </div>
                <div class="results-grid" id="resultsGrid">
                </div>
            </div>

            <div class="analysis-progress" id="analysisProgress" style="display: none;">
                <p>Generating Buyer Personas...</p>
            </div>
        </div>
    </section>

    <section class="how-it-works-section" id="how-it-works-section">
        <div class="container">
            <div class="how-header fade-in">
                <h2>Go From "Guess" to "Evidence" in 3 Steps</h2>
                <p>Our engine uses AI, cognitive science, and chaos modeling to simulate real-world buyer behavior, delivering a clear verdict before you build.</p>
            </div>
            <div class="how-steps-grid">
                <div class="how-step fade-in">
                    <div class="step-number">STEP 1</div>
                    <h3 class="step-title">Page & Persona Analysis</h3>
                    <p class="step-description">We analyze your page's structure, copy, and trust signals, then simulate your core B2B buyer personas (like the Security Guardian or Economic Buyer).</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 2</div>
                    <h3 class="step-title">Behavioral Simulation</h3>
                    <p class="step-description">Hundreds of AI "buyers" navigate your page. We record every virtual click, scroll, and moment of frustration to identify hidden friction points.</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 3</div>
                    <h3 class="step-title">Actionable Buyer Insight Brief</h3>
                    <p class="step-description">You get a one-page summary showing exactly what resonated, what caused confusion, and a prioritized list of fixes to improve conversion.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="waitlist-section" id="waitlist">
        <div class="container">
            <div class="waitlist-container">
                <div class="waitlist-header fade-in">
                    <h2>Get Early Access</h2>
                    <p>Stop debating and start building with evidence. Get your first Buyer Insight Brief for free.</p>
                </div>

                <div class="waitlist-form fade-in">
                    <form id="waitlistForm" onsubmit="submitWaitlist(event)">
                        <div class="form-group">
                            <input type="email" placeholder="Work email" required>
                        </div>
                        <div class="form-group">
                            <input type="text" placeholder="Company name" required>
                        </div>
                        <button type="submit" class="submit-button">Request Early Access</button>
                    </form>
                    <p class="privacy-note">We'll only email about WhyUser updates. No spam.</p>
                </div>

                <div class="success-checkmark" id="successMessage">
                    <svg viewBox="0 0 52 52">
                        <circle class="circle" cx="26" cy="26" r="25" fill="none" />
                        <path class="check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                    <p style="color: var(--success); font-weight: 600;">Thank you! We'll be in touch soon.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>WhyUser</h4>
                    <p style="margin-top: 12px; line-height: 1.6;">See your website through your buyer's eyes. Get AI-driven pre-launch analysis to build pages that convert.</p>
                </div>
                <div class="footer-section">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="#how-it-works-section">How It Works</a></li>
                        <li><a href="#">Pricing</a></li>
                        <li><a href="#">Documentation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WhyUser. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- Static page logic ---
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        mobileMenuToggle.addEventListener('click', () => navLinks.classList.toggle('open'));
        window.addEventListener('scroll', () => { document.getElementById('header').classList.toggle('scrolled', window.scrollY > 100); });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    navLinks.classList.remove('open');
                }
            });
        });
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        function submitWaitlist(event) {
            event.preventDefault();
            document.getElementById('waitlistForm').style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
        }

        // --- Interactive Demo Logic ---
        const analyzeBtn = document.getElementById('analyzeBtn');
        const demoSection = document.getElementById('interactiveDemoSection');
        const personaSelectorSection = document.getElementById('personaSelectorSection');
        const briefSection = document.getElementById('briefSection');
        const resultsGrid = document.getElementById('resultsGrid');
        const analysisProgress = document.getElementById('analysisProgress');
        const personaGrid = document.getElementById('personaGrid');

        // --- Data for Report ---
        const allPersonas = [
            { code: 'EU', name: 'End User', icon: '👩‍💻', role: 'Cares about daily workflow' },
            { code: 'GR', name: 'Security Guardian', icon: '🛡️', role: 'Vets for risk & compliance' },
            { code: 'TD', name: 'Tech Evaluator', icon: '⚙️', role: 'Validates features & integration' },
            { code: 'CH', name: 'Champion', icon: '🏆', role: 'Advocates for the solution' },
            { code: 'IN', name: 'Influencer', icon: '🌟', role: 'Shapes opinion with expertise' },
            { code: 'EB', name: 'Economic Buyer', icon: '💰', role: 'Approves budget, focuses on ROI' },
            { code: 'IT', name: 'IT Administrator', icon: '🖥️', role: 'Manages implementation & infra' },
            { code: 'LS', name: 'Legal/Procurement', icon: '⚖️', role: 'Manages contracts & vendor risk' },
        ];

        const personaDetails = {
            SecurityGuardian: { 
                id: 'SecurityGuardian', 
                icon: '🛡️', name: 'Security Guardian', 
                fictional_name: 'Valerie, Head of IT Risk & Compliance',
                mental_model: 'Believes that \'user-friendly\' and \'modern\' are often code for \'lacks enterprise-grade security features and compliance\'. Starts with a deep-seated trust in established, legacy vendors.',
                non_negotiable_needs: ['Must have SOC-2 Type II certification visible.', 'Must provide a clear, accessible data processing agreement (DPA).'],
                vitals: { traffic: '24%', conv: '0%', friction: '88', goal: 'To disqualify vendors who don\'t meet non-negotiable security standards.', skepticism: 'A slick UI often hides a lack of security depth.'},
                narrative: { intended: 'We are the modern, agile, user-friendly alternative to legacy security platforms.', verdict: 'FAIL. The page\'s lack of hard evidence confirms the persona\'s negative bias instead of challenging it.'},
                messaging_critique: {
                    summary: 'The headline "Simple, Transparent Pricing" is immediately contradicted by vague security claims, failing to address this persona\'s primary concern.',
                    issues: [
                        { current: '"Enterprise-grade encryption"', problem: 'Vague marketing speak that triggers skepticism', fix: '"AES-256 encryption, SOC-2 Type II, GDPR-compliant"' },
                        { current: '"Industry-leading security"', problem: 'Unsubstantiated claim without proof', fix: '"SOC-2 Type II certified with 99.99% uptime SLA"' },
                        { current: 'Security badges in footer only', problem: 'Hidden trust signals confirm bias about lacking security', fix: 'Move SOC-2, ISO badges to hero banner above fold' }
                    ]
                },
                variance: { score: 8, label: 'Highly Consistent' },
                playbook: [{ rank: 1, rec: 'Add SOC-2 & ISO-27001 badges in hero banner', score: 93, outcome: 'Increase Guardian Conversion Rate from 0% to ~5%'}, { rank: 2, rec: 'Provide a direct link to the data retention policy', score: 68, outcome: 'Reduce Product Page friction score by 15 pts'}],
                triggers: [{ text: 'No SOC-2 or ISO-27001 badge above the fold', sig: 'Critical', runs: 93}, { text: 'Phrase "enterprise-grade encryption" felt vague', sig: 'High', runs: 77}, { text: 'No data-retention policy link', sig: 'Medium', runs: 55}],
                drivers: [{ text: '"Protect customer data" headline', sig: 'Medium', runs: 84}, { text: 'Live-chat staffed by "CISSP-certified" agent', sig: 'Medium', runs: 41}],
                path: [{ path: 'HOME → BOUNCE', weight: '93%', outcome: 'Abandon', variance: 8 }, { path: 'HOME → /product → BOUNCE', weight: '7%', outcome: 'Abandon', variance: 15 }],
                benchmarks: [{ metric: 'Time to Find Compliance Info', site: 'Not Found', median: '18 seconds', delta: 'FAIL', percentile: '<10th'}, { metric: 'Visible Trust Signals (Homepage)', site: '1', median: '4', delta: '-3 signals', percentile: '15th'}],
            },
            TechEvaluator: { 
                id: 'TechEvaluator', 
                icon: '⚙️', 
                name: 'Tech Evaluator',
                fictional_name: 'David, Principal Engineer',
                mental_model: 'Easy integration usually means limited functionality or a weak API.',
                non_negotiable_needs: ['Must have clear API documentation.', 'Must see evidence of performance at scale.'],
                vitals: { traffic: '18%', conv: '4%', friction: '65', goal: 'To validate the product\'s technical capabilities and integration ease.', skepticism: 'Claims of "5-minute setup" are usually false.' },
                narrative: { intended: 'We are powerful but easy to integrate.', verdict: 'FAIL. Vague claims and a high-friction demo form undermine the "easy" narrative.' },
                messaging_critique: {
                    summary: 'Technical claims lack specificity and the "single-click API" promise contradicts the complex demo form, destroying credibility.',
                    issues: [
                        { current: '"Single-click API integration"', problem: 'Oversimplified claim that experienced developers distrust', fix: '"REST API with SDKs for Python, Node, Java. Average integration: 2 hours"' },
                        { current: '"Powerful features"', problem: 'Generic claim without technical proof', fix: '"Process 10M events/sec with <50ms p99 latency"' },
                        { current: '8-field demo form', problem: 'High friction contradicts "easy" narrative', fix: '3-field form: email, company, "Get API keys instantly"' }
                    ]
                },
                variance: { score: 12, label: 'Moderately Consistent' },
                playbook: [
                    { rank: 1, rec: 'Shorten demo form from 8 to 4 fields (2-step reveal)', score: 86, outcome: '+15% Demo Form Completion'}, 
                    { rank: 2, rec: 'Add interactive API explorer to docs', score: 55, outcome: 'Increase technical engagement'}
                ],
                triggers: [
                    { text: '8-field demo form exceeded patience threshold', sig: 'Critical', runs: 86}, 
                    { text: 'Vague "Single-click API" claim contradicted docs', sig: 'High', runs: 68}, 
                    { text: 'Hidden pricing tiers after 3 scrolls', sig: 'Medium', runs: 51}
                ],
                drivers: [
                    { text: '"5-minute SDK integration" copy', sig: 'High', runs: 71}, 
                    { text: 'Code snippet with cURL request', sig: 'Medium', runs: 54}, 
                    { text: 'Performance benchmark chart', sig: 'Medium', runs: 37}
                ],
                path: [
                    { path: 'HOME → /product → /pricing → /demo → BOUNCE', weight: '85%', outcome: 'Abandon', variance: 12 }, 
                    { path: 'HOME → /docs → BOUNCE', weight: '15%', outcome: 'Abandon', variance: 18 }
                ],
                benchmarks: [
                    { metric: 'Avg. Demo Form Fields', site: '8', median: '4', delta: '+4 fields', percentile: '20th'}, 
                    { metric: 'API Docs Accessibility', site: '3 Clicks', median: '1 Click', delta: '+2 Clicks', percentile: '30th'}
                ],
            }
        };        
        
        const briefDividerHTML = `<div class="brief-divider"></div>`;

        function createExecutiveSummaryHeaderHTML() {
            const personaData = [
                { name: 'Security Guardian', traffic: 0.24, conv: 0.00 },
                { name: 'Tech Evaluator', traffic: 0.18, conv: 0.04 },
                { name: 'Economic Buyer', traffic: 0.12, conv: 0.02 },
                { name: 'Champion', traffic: 0.22, conv: 0.18 },
                { name: 'End User', traffic: 0.24, conv: 0.15 }
            ];
            
            const overallConv = personaData.reduce((sum, p) => sum + (p.traffic * p.conv), 0);
            const overallConvPercent = (overallConv * 100).toFixed(1);

            return `
            <div class="brief-section" id="executiveSummarySection">
                <div class="section-header" style="margin-bottom: 24px; text-align: left;">
                    <h3 style="font-size: 24px;">1. Executive Summary</h3>
                </div>
                <ul class="executive-summary-list">
                    <li>The page fails to build trust with key decision-makers, causing a <strong>0% conversion rate</strong> for the critical <strong>Security Guardian</strong> persona.</li>
                    <li>The core issue is a mismatch between the 'modern, agile' marketing narrative and the lack of hard, visible proof (like compliance badges) required by technical buyers.</li>
                    <li><strong>Traffic-weighted overall conversion: ${overallConvPercent}%</strong> (vs. industry median of 2.3% for B2B SaaS)</li>
                </ul>
            </div>`;
        }

        function createPerformanceSummaryHTML() {
            return `
            <div class="brief-section" id="performanceSummarySection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">2. Performance Summary</h3>
                </div>
                <h4>Persona Performance Scoreboard</h4>
                <table class="scoreboard-table">
                <thead><tr><th>Persona</th><th>Traffic Weight</th><th>Simulated Conv. Rate</th><th>Friction Score (0-100)</th><th>Key Blocker</th></tr></thead>
                <tbody>
                    <tr><td>🛡️ Security Guardian</td><td>24%</td><td><strong>0%</strong></td><td><strong class="critical-blocker">88 (Critical)</strong></td><td class="critical-blocker">Missing Trust Signals</td></tr>
                    <tr><td>⚙️ Tech Evaluator</td><td>18%</td><td>4%</td><td><strong class="critical-blocker" style="color:var(--warning)">65 (High)</strong></td><td>Form Friction & Vague Copy</td></tr>
                    <tr><td>💰 Economic Buyer</td><td>12%</td><td>2%</td><td><strong class="critical-blocker" style="color:var(--warning)">72 (High)</strong></td><td class="critical-blocker">Unclear ROI</td></tr>
                    <tr><td>🏆 Champion</td><td>22%</td><td>18%</td><td>35 (Low)</td><td>-</td></tr>
                    <tr><td>👩‍💻 End User</td><td>24%</td><td>15%</td><td>41 (Low)</td><td>-</td></tr>
                </tbody>
                </table>
                ${briefDividerHTML}
                <h4>CTA Performance Summary</h4>
                <table class="details-table">
                    <thead><tr><th>Persona</th><th>Primary CTA</th><th>Result</th><th>Core Reason from Simulation</th></tr></thead>
                    <tbody>
                        <tr><td>🛡️ Security Guardian</td><td>Book a Demo</td><td><strong>Ignored (93%)</strong></td><td>Lost trust and abandoned before seeing the CTA.</td></tr>
                        <tr><td>⚙️ Tech Evaluator</td><td>Book a Demo</td><td><strong>Skipped (86%)</strong></td><td>Reached CTA but form friction (8 fields) was too high.</td></tr>
                        <tr><td>💰 Economic Buyer</td><td>Book a Demo</td><td><strong>Skipped (75%)</strong></td><td>Could not find pricing or ROI information to justify the next step.</td></tr>
                        <tr><td>🏆 Champion</td><td>Book a Demo</td><td><strong style="color:var(--success)">Clicked (80%)</strong></td><td>Recognized value and was motivated to engage further.</td></tr>
                        <tr><td>👩‍💻 End User</td><td>Book a Demo</td><td><strong style="color:var(--success)">Clicked (72%)</strong></td><td>Page content addressed core needs, leading to interest in a demo.</td></tr>
                    </tbody>
                </table>
            </div>
            `;
        }

        function createPathAnalysisTableHTML() {
             return `
            <div class="brief-section" id="pathAnalysisSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">3. Key Journey Abandonment Points</h3>
                </div>
                 <table class="path-analysis-table">
                    <thead><tr><th>Journey Step (Path)</th><th>🛡️ Guardian</th><th>⚙️ Tech Eval</th><th>💰 Econ Buyer</th><th>🏆 Champion</th><th>👩‍💻 End User</th></tr></thead>
                    <tbody>
                        <tr><td>Home Page</td><td><strong class="critical-blocker">93% Abd.</strong></td><td>0% Abd.</td><td>5% Abd.</td><td>0% Abd.</td><td>0% Abd.</td></tr>
                        <tr><td style="padding-left: 24px;">→ Product Page</td><td>-</td><td>5% Abd.</td><td><strong class="critical-blocker">35% Abd.</strong></td><td>2% Abd.</td><td>5% Abd.</td></tr>
                        <tr><td style="padding-left: 24px;">→ Pricing Page</td><td>-</td><td>15% Abd.</td><td><strong class="critical-blocker">40% Abd.</strong></td><td>5% Abd.</td><td>10% Abd.</td></tr>
                        <tr><td style="padding-left: 24px;">→ Demo Form</td><td>-</td><td><strong class="critical-blocker">85% Abd.</strong></td><td>-</td><td>10% Abd.</td><td>15% Abd.</td></tr>
                        <tr><td><strong>Final Conv.</strong></td><td><strong>0%</strong></td><td><strong>4%</strong></td><td><strong>2%</strong></td><td><strong>18%</strong></td><td><strong>15%</strong></td></tr>
                    </tbody>
                </table>
            </div>
            `;
        }

        function createHeatMapHTML() {
            return `
            <div class="brief-section" id="heatMapSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">4. Page-Level Friction Hotspots</h3>
                </div>
                <p style="font-size: 16px; color: var(--text-tertiary);">Friction Score (from 100 simulations) by page for each persona. Lower is better.</p>
                <table class="heat-map-table">
                    <thead> <tr> <th>Persona</th> <th>HOME</th> <th>/PRODUCT</th> <th>/PRICING</th> <th>/DEMO FORM</th> </tr> </thead>
                    <tbody>
                        <tr> <td>🛡️ Security Guardian</td> <td class="friction-cell"><span class="friction-high">█ 88</span></td> <td class="friction-cell"><span class="friction-med">█ 45</span></td> <td>-</td> <td>-</td> </tr>
                        <tr> <td>⚙️ Tech Evaluator</td> <td class="friction-cell"><span class="friction-low">█ 25</span></td> <td class="friction-cell"><span class="friction-med">█ 55</span></td> <td class="friction-cell"><span class="friction-med">█ 61</span></td> <td class="friction-cell"><span class="friction-high">█ 91</span></td> </tr>
                        <tr> <td>💰 Economic Buyer</td> <td class="friction-cell"><span class="friction-low">█ 30</span></td> <td class="friction-cell"><span class="friction-med">█ 68</span></td> <td class="friction-cell"><span class="friction-high">█ 85</span></td> <td>-</td> </tr>
                        <tr> <td>🏆 Champion</td> <td class="friction-cell"><span class="friction-low">█ 15</span></td> <td class="friction-cell"><span class="friction-low">█ 20</span></td> <td class="friction-cell"><span class="friction-low">█ 25</span></td> <td class="friction-cell"><span class="friction-low">█ 35</span></td> </tr>
                        <tr> <td>👩‍💻 End User</td> <td class="friction-cell"><span class="friction-low">█ 20</span></td> <td class="friction-cell"><span class="friction-low">█ 25</span></td> <td class="friction-cell"><span class="friction-low">█ 30</span></td> <td class="friction-cell"><span class="friction-med">█ 41</span></td> </tr>
                    </tbody>
                </table>
                <div class="heat-map-legend"><span>Friction Score: <span class="friction-high">High</span>, <span class="friction-med">Medium</span>, <span class="friction-low">Low</span></span></div>
            </div>`;
        }
        
        function createPlaybookHTML() {
            return `
            <div class="brief-section playbook-section" id="playbookSection">
                <div class="playbook-title">
                    <h3 style="font-size: 24px;">5. Prioritized Quick-Win Playbook</h3>
                    <p style="font-size: 16px; color: var(--text-secondary);">This is your data-driven backlog. Fix these to win over your key personas.</p>
                </div>
                <table class="playbook-table">
                    <thead><tr><th>Rank</th><th>Recommendation</th><th>Value Score</th><th>Persona / Stage</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td><strong>Add SOC-2 & ISO-27001 badges in hero banner</strong></td><td class="value-score" style="color:var(--success)">93</td><td>Security Guardian / Homepage</td></tr>
                        <tr><td>2</td><td>Shorten demo form from 8 to 4 fields (2-step reveal)</td><td class="value-score" style="color:var(--success)">86</td><td>Tech Evaluator / Demo Form</td></tr>
                        <tr><td>3</td><td>Replace "enterprise-grade encryption" with specific standards (e.g., "AES-256")</td><td class="value-score" style="color:var(--warning)">77</td><td>Guardian & Evaluator / Product Page</td></tr>
                    </tbody>
                </table>
            </div>`;
        }

        function createPersonaPlaybookHTML(persona) {
            if (!persona.playbook) return '';
            return `
                 <div class="detail-card">
                    <h4>Persona-Specific Playbook</h4>
                     <table class="details-table">
                       <thead><tr><th>Rank</th><th>Recommendation</th><th>Value Score</th><th>Expected Outcome</th></tr></thead>
                       <tbody>${persona.playbook.map(p => `<tr><td>${p.rank}</td><td><strong>${p.rec}</strong></td><td>${p.score}</td><td>${p.outcome}</td></tr>`).join('')}</tbody>
                    </table>
                    <p class="playbook-note"><strong>Note on Value Score:</strong> Represents the percentage of simulation runs where this friction point caused abandonment or frustration for this specific persona.</p>
                </div>`;
        }

        function createMessagingCritiqueHTML(persona) {
            if (!persona.messaging_critique) return '';
            const { summary, issues } = persona.messaging_critique;
            
            return `
                <div class="detail-card">
                    <h4>Messaging Critique & Copy Fixes</h4>
                    <p style="margin-bottom: 16px; color: var(--text-secondary);">${summary}</p>
                    <table class="details-table">
                        <thead>
                            <tr><th>Current Copy</th><th>The Problem</th><th>Fix It To</th></tr>
                        </thead>
                        <tbody>
                            ${issues.map(issue => `
                                <tr>
                                    <td style="color: var(--error);">${issue.current}</td>
                                    <td>${issue.problem}</td>
                                    <td style="color: var(--success); font-weight: 600;">${issue.fix}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>`;
        }

        function createPathDistributionHTML(paths) {
            return `
                <div class="detail-card">
                    <h4>Path Distribution</h4>
                    <table class="details-table">
                    <thead><tr><th>Path Distribution</th><th>Weight</th><th>Outcome</th><th>Variance Score</th></tr></thead>
                    <tbody>${paths.map(p => `
                        <tr>
                            <td>${p.path}</td>
                            <td>${p.weight}</td>
                            <td>${p.outcome}</td>
                            <td>${p.variance}/100 <span style="color: var(--text-tertiary)">(${p.variance < 10 ? 'Highly Consistent' : p.variance < 20 ? 'Moderately Consistent' : 'Variable'})</span></td>
                        </tr>
                    `).join('')}</tbody>
                    </table>
                </div>`;
        }

        function createBehavioralTriggersAndDriversHTML(persona) {
            return `
             <div class="detail-card">
                <h4>Behavioral Analysis</h4>
                <div class="two-column-grid">
                    <div>
                        <h5>Abandonment Triggers</h5>
                        <table class="details-table">
                         <thead><tr><th>Trigger Event</th><th>Significance</th><th>Weight</th></tr></thead>
                        <tbody>${persona.triggers.map(t => `<tr><td>${t.text}</td><td><strong class="critical-blocker">${t.sig}</strong></td><td>${t.runs}/100</td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                    <div>
                        <h5>Engagement Drivers</h5>
                        <table class="details-table">
                         <thead><tr><th>Driver Event</th><th>Significance</th><th>Weight</th></tr></thead>
                        <tbody>${persona.drivers.map(d => `<tr><td>${d.text}</td><td>${d.sig}</td><td>${d.runs}/100</td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                </div>
            </div>
            `;
        }
        
        function createBenchmarksHTML(benchmarks) {
            return `
                <div class="detail-card">
                    <h4>Persona-Specific Benchmark</h4>
                    <table class="details-table">
                    <thead><tr><th>Persona-Specific Benchmark</th><th>Your Site</th><th>Industry Median</th><th>Percentile Rank</th></tr></thead>
                    <tbody>${benchmarks.map(b => `
                        <tr>
                            <td>${b.metric}</td>
                            <td><strong>${b.site}</strong></td>
                            <td>${b.median}</td>
                            <td><strong class="${b.percentile.includes('<') ? 'critical-blocker' : ''}">${b.percentile}</strong></td>
                        </tr>
                    `).join('')}</tbody>
                    </table>
                </div>`;
        }

        function createPersonaScoreBadgeHTML(persona) {
            if (persona.id === 'SecurityGuardian') {
                return `
                <div class="persona-score-badge">
                    <div class="score-title">Guardian Trust Score</div>
                    <div class="score">31 / 100</div>
                    <div class="score-subtitle">Bottom 12th %tile in Security</div>
                </div>`;
            } else {
                const friction = parseInt(persona.vitals.friction);
                let scoreColor = 'var(--success)';
                if (friction >= 80) scoreColor = 'var(--error)';
                else if (friction >= 60) scoreColor = 'var(--warning)';
                
                return `
                <div class="persona-score-badge">
                    <div class="score-title">${persona.name} Friction Score</div>
                    <div class="score" style="color: ${scoreColor};">${friction} / 100</div>
                    <div class="score-subtitle">Lower is better</div>
                </div>`;
            }
        }
        
        function createPersonaProfileHTML(persona) {
             return `
                <div class="detail-card">
                    <h4>A. Persona Profile</h4>
                     <p style="margin-bottom: 16px;"><strong>Mental Model:</strong> <em>"${persona.mental_model}"</em></p>
                    <ul class="worldview-list">
                       ${persona.non_negotiable_needs.map(need => `<li><strong>Non-Negotiable:</strong> ${need}</li>`).join('')}
                    </ul>
                </div>
             `;
        }

        function createPersonaDashboardHTML(persona) {
            const { variance } = persona;
            let varianceClass = 'variance-variable';
            if (variance.score < 10) varianceClass = 'variance-consistent';
            else if (variance.score < 20) varianceClass = 'variance-moderate';

            return `
            <div class="persona-dashboard-grid">
                <div class="persona-header">
                    <div class="persona-icon">${persona.icon}</div>
                    <div class="persona-title-group">
                        <h3 class="persona-name">${persona.name}</h3>
                        <p class="persona-fictional-name">${persona.fictional_name}</p>
                        <div class="persona-variance-bar-container"><div class="persona-variance-bar ${varianceClass}" style="width: ${variance.score}%;"></div></div>
                        <p style="margin-top: 8px; color: var(--text-tertiary);">Behavior Variance: ${variance.score}/100 (${variance.label})</p>
                    </div>
                </div>

                <div class="two-column-grid">
                    ${createPersonaProfileHTML(persona)}
                    ${createPersonaScoreBadgeHTML(persona)}
                </div>
                ${briefDividerHTML}
                ${createPersonaPlaybookHTML(persona)}
                ${briefDividerHTML}
                ${createPathDistributionHTML(persona.path)}
                ${briefDividerHTML}
                ${createMessagingCritiqueHTML(persona)}
                ${briefDividerHTML}
                ${createBehavioralTriggersAndDriversHTML(persona)}
                ${briefDividerHTML}
                ${createBenchmarksHTML(persona.benchmarks)}
            </div>`;
        }
        
        function createShareBadgeHTML() {
            const mailtoSubject = "Evidence to unblock our landing page";
            const mailtoBody = "Team,%0A%0AI ran our landing page through an AI buyer simulation. The results for our 'Security Guardian' persona are concerning.%0A%0AOur Guardian Trust Score is 31/100 (Bottom 12th percentile). This is likely a key reason our enterprise deals are stalling.%0A%0ALet's discuss the recommended fixes from the attached brief.";
            const mailtoLink = `mailto:?subject=${encodeURIComponent(mailtoSubject)}&body=${encodeURIComponent(mailtoBody)}`;

            return `
            <div class="brief-section" id="shareBadgeSection">
                 <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">7. Shareable Evidence</h3>
                </div>
                <div class="share-badge-container">
                    <div class="share-badge-text">
                        <p><strong>Arm your team with objective evidence.</strong> Use the pre-filled email to end subjective debates about compliance and get stakeholder buy-in.</p>
                        <a href="${mailtoLink}" class="predict-button" style="font-size: 15px; padding: 12px 24px;">Share Report Internally</a>
                    </div>
                </div>
            </div>`;
        }
        
        function createConfidenceMethodologyHTML() {
            return `
            <div class="brief-section" id="confidenceSection">
                <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                    <h3 style="font-size: 24px;">8. Report Confidence & Methodology</h3>
                </div>
                <div style="background: rgba(139, 107, 71, 0.05); border: 1px solid var(--border); border-radius: 8px; padding: 24px;">
                    <h4 style="margin-bottom: 16px;">Simulation Confidence: <span style="color: var(--success);">High (9/10 runs)</span></h4>
                    <p style="margin-bottom: 16px;">The primary abandonment signals for the Security Guardian and Tech Evaluator personas were consistent across >90% of simulations, indicating stable and reliable results.</p>
                    
                    <h4 style="margin-bottom: 8px;">Methodology</h4>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="margin-bottom: 8px;">• <strong>Simulations:</strong> 100 AI buyer journeys across 8 canonical B2B personas</li>
                        <li style="margin-bottom: 8px;">• <strong>Traffic Weights:</strong> Based on Similarweb data and industry averages for your vertical</li>
                        <li style="margin-bottom: 8px;">• <strong>Benchmarks:</strong> 2025 B2B SaaS Conversion Index (n=500 companies)</li>
                        <li style="margin-bottom: 8px;">• <strong>Variance Scoring:</strong> Lower scores indicate more consistent behavior across runs</li>
                    </ul>
                    
                    <p style="margin-top: 16px; font-size: 14px; color: var(--text-tertiary);">
                        <strong>Note:</strong> This analysis simulates buyer behavior based on page structure, copy, and design patterns. 
                        Actual conversion rates may vary based on traffic quality, market conditions, and product-market fit.
                    </p>
                </div>
            </div>`;
        }

        async function runAnalysis() {
            const url = document.getElementById('pageUrl').value; 
            if (!url || !url.startsWith('http')) { 
                alert('Please enter a valid URL (e.g., https://example.com).'); 
                return; 
            }
            
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = 'Analyzing...';
            demoSection.style.display = 'block'; 
            briefSection.style.display = 'none';
            personaSelectorSection.style.display = 'none';
            demoSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            resultsGrid.innerHTML = '';
            personaGrid.innerHTML = '';
            analysisProgress.style.display = 'block'; 
            analysisProgress.querySelector('p').textContent = 'Generating Buyer Personas...';

            await new Promise(resolve => setTimeout(resolve, 1500));
            
            analysisProgress.style.display = 'none'; 
            personaSelectorSection.style.display = 'block';
            
            const selectedPersonas = ['Security Guardian', 'Tech Evaluator', 'Economic Buyer', 'Champion', 'End User'];
            allPersonas.forEach(p => {
                const card = document.createElement('div'); 
                card.className = 'persona-selector-card';
                if (selectedPersonas.includes(p.name)) { card.classList.add('selected'); }
                card.innerHTML = `<div class="persona-selector-icon">${p.icon}</div><div class="persona-selector-name">${p.name}</div><p class="persona-selector-role">${p.role}</p>`;
                personaGrid.appendChild(card);
            });
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            briefSection.style.display = 'block'; 
            resultsGrid.innerHTML = `<div class="master-brief-card" id="masterBriefCard"></div>`;
            const masterCard = document.getElementById('masterBriefCard');
            
            const executiveSummaryHeaderHTML = createExecutiveSummaryHeaderHTML();
            const performanceSummaryHTML = createPerformanceSummaryHTML();
            const pathAnalysisHTML = createPathAnalysisTableHTML();
            const heatMapHTML = createHeatMapHTML();
            const playbookHTML = createPlaybookHTML();
            const personaTabsHTML = `
                <div class="brief-section" id="personaDashboards">
                    <div class="section-header" style="margin-bottom: 24px; text-align:left;">
                        <h3 style="font-size: 24px;">6. Detailed Persona Dashboards</h3>
                    </div>
                    <div class="persona-tabs">
                        <div class="tab-link active" data-tab="SecurityGuardian">🛡️ Security Guardian</div>
                        <div class="tab-link" data-tab="TechEvaluator">⚙️ Tech Evaluator</div>
                    </div>
                    <div class="tab-content-wrapper">
                        <div class="tab-content active" id="tab-SecurityGuardian">
                            ${createPersonaDashboardHTML(personaDetails.SecurityGuardian)}
                        </div>
                        <div class="tab-content" id="tab-TechEvaluator">
                            ${createPersonaDashboardHTML(personaDetails.TechEvaluator)}
                        </div>
                    </div>
                </div>`;
            const shareBadgeHTML = createShareBadgeHTML();
            const confidenceHTML = createConfidenceMethodologyHTML();

            const reportHTML = [
                executiveSummaryHeaderHTML,
                performanceSummaryHTML,
                pathAnalysisHTML,
                heatMapHTML,
                playbookHTML,
                personaTabsHTML,
                shareBadgeHTML,
                confidenceHTML
            ].join(briefDividerHTML);
            
            masterCard.innerHTML = reportHTML;

            await new Promise(resolve => setTimeout(resolve, 100));
            masterCard.classList.add('visible');

            setupUIInteractions();
            briefSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            analyzeBtn.disabled = false;
            analyzeBtn.textContent = 'Analyze My Page';
        }

        function setupUIInteractions() {
            document.addEventListener('click', function(event) {
                const clickedTab = event.target.closest('.tab-link');
                if (!clickedTab) return;
                
                const tabId = clickedTab.getAttribute('data-tab');
                if (!tabId) return;
                
                const tabContainer = clickedTab.closest('.persona-tabs');
                const tabContentWrapper = tabContainer.nextElementSibling;
                
                tabContainer.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
                tabContentWrapper.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                clickedTab.classList.add('active');

                const activeContent = document.getElementById(`tab-${tabId}`);
                if (activeContent) {
                    activeContent.classList.add('active');
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', setupUIInteractions);
    </script>
</body>
</html>