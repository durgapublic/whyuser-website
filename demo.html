<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhyUser - Stop Building Blind</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-primary: #faf8f5;
            --bg-secondary: rgba(246, 243, 238, 0.8);
            --bg-accent: rgba(235, 227, 215, 0.3);
            --text-primary: #1a1816;
            --text-secondary: #4a453f;
            --text-tertiary: #726a5f;
            --accent: #8b6b47;
            --accent-hover: #735639;
            --success: #22863a;
            --error: #dc3545;
            --warning: #f59e0b;
            --border: rgba(139, 107, 71, 0.1);
            --shadow: rgba(26, 24, 22, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(250, 248, 245, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        header.scrolled {
            background: rgba(250, 248, 245, 0.95);
            box-shadow: 0 2px 40px var(--shadow);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 72px;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
        }

        .logo-image {
            height: 48px;
            width: auto;
            display: block;
            transition: opacity 0.3s ease;
        }

        .logo:hover .logo-image {
            opacity: 0.7;
        }

        .tagline {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .nav-links {
            display: flex;
            gap: 36px;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            padding: 140px 0 80px;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -25%;
            width: 70%;
            height: 150%;
            background: radial-gradient(circle, rgba(139, 107, 71, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .hero-content {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: clamp(36px, 7vw, 60px);
            font-weight: 600;
            line-height: 1.05;
            letter-spacing: -0.03em;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--accent) 0%, var(--error) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 24px;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 48px;
            line-height: 1.5;
        }
        
        /* Analysis Input Section */
        .analysis-input-section {
            padding: 40px;
            background: rgba(255,255,255,0.5);
            border: 1px solid var(--border);
            border-radius: 16px;
            box-shadow: 0 10px 40px var(--shadow);
            backdrop-filter: blur(10px);
        }
        
        .analysis-input-section h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            text-align: center;
        }

        .url-input {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .url-input input {
            flex: 1;
            padding: 18px 24px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        .url-input input:focus {
            border-color: var(--accent);
            background: white;
            box-shadow: 0 0 0 4px rgba(139, 107, 71, 0.1);
        }

        .predict-button {
            padding: 18px 36px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .predict-button:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(139, 107, 71, 0.3);
        }
        
        .predict-button:disabled {
            background: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .input-context {
            font-size: 14px;
            color: var(--text-tertiary);
            text-align: center;
            margin-top: 24px;
        }
        
        /* Interactive Demo Section */
        #interactiveDemoSection {
            display: none;
            padding: 80px 0;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .section-header h2 {
            font-size: clamp(36px, 5vw, 48px);
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .section-header p {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
        }
        
        #personaSelectorSection {
            display: none;
        }
        .persona-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }
        .persona-selector-card {
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.4);
        }
        .persona-selector-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px var(--shadow);
            border-color: var(--accent);
        }
        .persona-selector-card.selected {
            border-color: var(--accent);
            background: var(--bg-accent);
            box-shadow: 0 8px 30px rgba(139, 107, 71, 0.1);
            transform: translateY(-2px);
        }
        .persona-selector-icon { font-size: 32px; margin-bottom: 12px; }
        .persona-selector-name { font-weight: 600; color: var(--text-primary); }
        .persona-selector-role { font-size: 14px; color: var(--text-tertiary); min-height: 40px; }
        
        .analysis-progress {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .analysis-progress p {
            font-size: 20px;
            font-weight: 500;
            color: var(--text-secondary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        #briefSection {
            display: none;
            margin-top: 64px;
        }

        /* Unified report card styling */
        .master-brief-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 16px 50px var(--shadow);
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .master-brief-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .brief-section {
            opacity: 0;
            transition: opacity 0.8s ease;
        }
        .brief-section.visible {
            opacity: 1;
        }
        .brief-divider {
            border-top: 1px solid var(--border);
            margin: 40px 0;
        }

        /* Executive Summary Section */
        .executive-summary-list { list-style: none; padding-left: 0; }
        .executive-summary-list li { font-size: 18px; color: var(--text-secondary); margin-bottom: 16px; padding-left: 30px; position: relative; }
        .executive-summary-list li:last-child { margin-bottom: 0; }
        .executive-summary-list li::before { content: '⚡'; position: absolute; left: 0; top: 2px; font-size: 18px; }

        /* Strategic Narrative Section */
        .strategic-narrative-section {
            background: var(--bg-accent);
            border-radius: 12px;
            padding: 32px;
        }
        .strategic-narrative-section h3 {
            font-size: 24px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 24px;
        }
        .aha-moment {
            font-size: 18px;
            text-align: center;
            color: var(--text-primary);
            margin-bottom: 32px;
            font-style: italic;
        }
        .narrative-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        .narrative-column h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border);
        }
        .narrative-list {
            list-style-type: none;
            padding-left: 0;
        }
        .narrative-list li {
            position: relative;
            padding-left: 24px;
            margin-bottom: 8px;
            font-size: 15px;
            color: var(--text-secondary);
        }
        .narrative-list li::before {
            position: absolute;
            left: 0;
            top: 4px;
        }
        .narrative-strengths li::before { content: '✅'; }
        .narrative-weaknesses li::before { content: '❌'; }
        .narrative-recommendation {
            border-top: 1px solid var(--border);
            padding-top: 24px;
        }
        .narrative-recommendation h4 { font-size: 16px; margin-bottom: 12px; }
        .narrative-recommendation p { color: var(--text-secondary); font-size: 15px; }


        /* Heat Map Section */
        .heat-map-table { width: 100%; border-collapse: collapse; font-family: 'SF Mono', monospace; font-size: 14px; }
        .heat-map-table th, .heat-map-table td { padding: 12px; text-align: left; }
        .heat-map-table th { color: var(--text-tertiary); }
        .heat-map-table td:first-child { font-weight: 600; }
        .friction-high { color: var(--error); }
        .friction-med { color: var(--warning); }
        .friction-low { color: var(--text-tertiary); opacity: 0.7; }
        .friction-none { color: var(--text-tertiary); opacity: 0.3; }
        .heat-map-legend { margin-top: 24px; text-align: center; font-size: 14px; color: var(--text-tertiary); }
        .heat-map-legend span { margin: 0 12px; }

        /* Persona Snapshot Section */
        .persona-header { display: flex; align-items: center; gap: 24px; margin-bottom: 32px; padding-bottom: 32px; border-bottom: 1px solid var(--border); }
        .persona-icon { font-size: 48px; background: var(--bg-accent); width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
        .persona-title-group { flex: 1; }
        .persona-name { font-size: 28px; font-weight: 600; color: var(--text-primary); }
        .persona-role-context { font-size: 16px; color: var(--text-secondary); }
        .persona-insights-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px; }
        .insight-column h4 { font-size: 18px; font-weight: 600; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .insight-list { list-style: none; display: grid; gap: 12px; }
        .insight-list li { position: relative; padding-left: 28px; font-size: 16px; color: var(--text-secondary); }
        .insight-list li::before { position: absolute; left: 0; top: 2px; font-size: 18px; }
        .positive-insights li::before { content: '✅'; }
        .negative-insights li::before { content: '⚠'; }
        .path-outcome-section { padding-top: 32px; border-top: 1px solid var(--border); }
        .path-outcome-section h4 { margin-bottom: 16px; font-size: 18px; font-weight: 600; }
        .path-outcome-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; text-align: center; }
        .path-outcome-metric p { font-size: 14px; color: var(--text-tertiary); margin-bottom: 4px; }
        .path-outcome-metric span { font-size: 16px; font-weight: 600; }
        .path-outcome-metric .bad-outcome { color: var(--error); }
        
        .monologue-section { margin-top: 32px; padding-top: 32px; border-top: 1px solid var(--border); }
        .monologue-section h4 { text-align: center; margin-bottom: 20px; font-size: 18px; font-weight: 600; }
        .monologue-timeline { font-family: 'SF Mono', monospace; font-size: 14px; line-height: 1.8; background: #fdfbf9; padding: 20px; border-radius: 8px; min-height: 100px; }
        .monologue-entry { opacity: 0; transition: opacity 0.5s ease; margin-bottom: 8px; }
        .monologue-time { color: var(--text-tertiary); }
        .monologue-event { text-transform: uppercase; font-weight: 600; }
        .monologue-thought { color: var(--text-primary); }
        .blinking-cursor { display: inline-block; background-color: var(--text-primary); width: 8px; height: 14px; animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* Final Verdict Section */
        .final-verdict-section {
            margin-top: 32px;
            padding: 24px;
            border: 2px solid var(--error);
            border-radius: 12px;
            background: rgba(220, 53, 69, 0.03);
        }
        .final-verdict-section h4 {
            font-size: 18px;
            font-weight: 600;
            color: var(--error);
            text-align: center;
            margin-bottom: 16px;
        }
        .verdict-reason p, .verdict-irritant p {
            margin: 0;
            font-size: 16px;
            color: var(--text-secondary);
        }
        .verdict-reason strong, .verdict-irritant strong {
            color: var(--text-primary);
        }
        .verdict-reason { margin-bottom: 12px; }

        /* Diagnostics and Playbook Section with Tabs */
        .diagnostics-playbook-section {
            border-top: 1px solid var(--border);
            padding-top: 32px;
        }
        .tab-navigation {
            display: flex;
            border-bottom: 2px solid var(--border);
            margin-bottom: 32px;
        }
        .tab-btn {
            padding: 12px 24px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-tertiary);
            position: relative;
            transition: color 0.3s ease;
        }
        .tab-btn:hover {
            color: var(--text-primary);
        }
        .tab-btn.active {
            color: var(--accent);
            font-weight: 600;
        }
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent);
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .business-impact-statement {
            font-size: 18px;
            text-align: center;
            font-weight: 500;
            padding: 16px;
            background: var(--bg-accent);
            border-radius: 8px;
            margin-bottom: 32px;
        }
        .critique-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            margin-bottom: 40px;
        }
        .critique-card {
            border: 1px solid var(--border);
            border-radius: 12px;
        }
        .critique-header {
            padding: 16px 24px;
            background: var(--bg-secondary);
            font-weight: 600;
            font-size: 18px;
            border-bottom: 1px solid var(--border);
        }
        .critique-body {
            padding: 24px;
        }
        .critique-body strong {
            display: block;
            margin-bottom: 4px;
            font-weight: 600;
            color: var(--text-primary);
        }
        .critique-body p {
            margin: 0 0 16px;
            color: var(--text-secondary);
        }
        .fix-recommendation {
            border-top: 1px dashed var(--border);
            padding-top: 16px;
        }
        .fix-recommendation strong { color: var(--success); }
        
        .playbook-section { border-top: 1px solid var(--border); padding-top: 40px; margin-bottom: 40px; }
        .playbook-title { text-align: center; margin-bottom: 32px; }
        .playbook-title h3 { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        .playbook-table { width: 100%; border-collapse: collapse; }
        .playbook-table th, .playbook-table td { padding: 16px; text-align: left; border-bottom: 1px solid var(--border); }
        .playbook-table th { color: var(--text-secondary); font-weight: 500; font-size: 14px; text-transform: uppercase; }
        .effort-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 14px; font-weight: 500; }
        .effort-low { background: rgba(34, 134, 58, 0.1); color: var(--success); }
        .effort-med { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
        .impact-high { color: var(--success); font-weight: 600; }
        .impact-med { color: var(--text-primary); font-weight: 600; }

        /* Benchmark Section */
        .benchmark-metric { padding: 24px 0; border-bottom: 1px solid var(--border); }
        .benchmark-metric:last-child { border-bottom: none; padding-bottom: 0; }
        .benchmark-metric:first-child { padding-top: 0; }
        .benchmark-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .benchmark-name { font-weight: 600; font-size: 18px; }
        .benchmark-score { font-size: 18px; }
        .benchmark-score .your-value { font-weight: 700; }
        .benchmark-score .gap { margin-left: 8px; font-size: 14px; font-weight: 500; }
        .gap-negative { color: var(--error); }
        .gap-positive { color: var(--success); }
        .benchmark-bar-container { width: 100%; height: 20px; background: var(--bg-accent); border-radius: 10px; position: relative; }
        .benchmark-bar { position: absolute; top: 0; left: 0; height: 100%; background: linear-gradient(90deg, var(--warning) 0%, var(--success) 100%); border-radius: 10px; }
        .benchmark-marker { position: absolute; top: -4px; width: 4px; height: 28px; background: var(--error); border-radius: 2px; transform: translateX(-50%); text-align: center; }
        .benchmark-marker::after { content: 'YOU'; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 12px; font-weight: 600; }
        .bar-labels { display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: var(--text-tertiary); }

        /* Share Badge Section */
        .share-badge-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; align-items: center; }
        .share-badge { font-family: 'SF Mono', monospace; border: 2px solid var(--border); padding: 24px; border-radius: 8px; background: var(--bg-primary); text-align: center; }
        .share-badge .score { font-size: 32px; font-weight: 600; }
        .share-badge-text p { margin: 0 0 16px; font-size: 18px; color: var(--text-secondary);}

        /* How it Works Section */
        .how-it-works-section { padding: 80px 0; background: var(--bg-primary); }
        .how-header { text-align: center; margin-bottom: 64px; }
        .how-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; letter-spacing: -0.02em; }
        .how-header p { font-size: 20px; color: var(--text-secondary); max-width: 800px; margin: 0 auto; }
        .how-steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px; }
        .how-step { padding: 32px; border: 1px solid var(--border); border-radius: 16px; background: rgba(255,255,255,0.4); transition: all 0.3s ease; }
        .how-step:hover { transform: translateY(-4px); box-shadow: 0 12px 40px var(--shadow); border-color: rgba(139, 107, 71, 0.2); }
        .step-number { font-size: 14px; font-weight: 600; color: var(--accent); margin-bottom: 16px; background: var(--bg-accent); display: inline-block; padding: 4px 12px; border-radius: 20px; }
        .step-title { font-size: 20px; font-weight: 600; margin-bottom: 12px; }
        .step-description { font-size: 16px; color: var(--text-secondary); }

        /* Waitlist Section */
        .waitlist-section { padding: 80px 0; background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%); }
        .waitlist-container { max-width: 600px; margin: 0 auto; text-align: center; }
        .waitlist-header { margin-bottom: 48px; }
        .waitlist-header h2 { font-size: 48px; font-weight: 600; margin-bottom: 16px; }
        .waitlist-header p { font-size: 20px; color: var(--text-secondary); }
        .waitlist-form { background: rgba(255, 255, 255, 0.5); border-radius: 16px; padding: 40px; backdrop-filter: blur(10px); }
        .form-group { margin-bottom: 24px; text-align: left; }
        .form-group input { width: 100%; padding: 14px 20px; border: 2px solid var(--border); border-radius: 8px; background: rgba(255, 255, 255, 0.7); font-size: 15px; font-family: inherit; transition: all 0.3s ease; outline: none; }
        .form-group input:focus { border-color: var(--accent); background: white; box-shadow: 0 0 0 3px rgba(139, 107, 71, 0.1); }
        .submit-button { width: 100%; padding: 16px 32px; background: var(--accent); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .submit-button:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 8px 30px rgba(139, 107, 71, 0.25); }
        .privacy-note { margin-top: 16px; font-size: 14px; color: var(--text-tertiary); }
        .success-checkmark { width: 80px; height: 80px; margin: 0 auto 24px; position: relative; display: none; }
        .success-checkmark.show { display: block; }
        .success-checkmark svg { width: 100%; height: 100%; }
        .success-checkmark .circle { stroke: var(--success); stroke-width: 2; fill: none; stroke-dasharray: 166; stroke-dashoffset: 166; animation: circle 0.6s ease forwards; }
        .success-checkmark .check { stroke: var(--success); stroke-width: 3; fill: none; stroke-dasharray: 48; stroke-dashoffset: 48; animation: check 0.3s ease forwards 0.6s; }
        @keyframes circle { to { stroke-dashoffset: 0; } }
        @keyframes check { to { stroke-dashoffset: 0; } }

        /* Footer */
        footer { background: var(--text-primary); color: rgba(255, 255, 255, 0.9); padding: 64px 0 32px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 48px; margin-bottom: 48px; }
        .footer-section h4 { font-size: 16px; font-weight: 600; margin-bottom: 16px; color: white; }
        .footer-section ul { list-style: none; }
        .footer-section li { margin-bottom: 12px; }
        .footer-section a { color: rgba(255, 255, 255, 0.7); text-decoration: none; font-size: 15px; transition: color 0.3s ease; }
        .footer-section a:hover { color: white; }
        .footer-bottom { border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 32px; text-align: center; font-size: 14px; color: rgba(255, 255, 255, 0.5); }

        /* Animations & Responsive */
        .fade-in { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
        .mobile-menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
        .mobile-menu-toggle span { display: block; width: 24px; height: 2px; background: var(--text-primary); margin-bottom: 6px; transition: all 0.3s ease; }
        @media (max-width: 768px) {
            .nav-links { position: fixed; top: 72px; left: 0; right: 0; background: rgba(250, 248, 245, 0.98); flex-direction: column; padding: 24px; gap: 24px; transform: translateX(-100%); transition: transform 0.3s ease; box-shadow: 0 4px 40px var(--shadow); }
            .nav-links.open { transform: translateX(0); }
            .mobile-menu-toggle { display: block; }
            h1 { font-size: clamp(30px, 10vw, 48px); }
            .url-input { flex-direction: column; }
            .predict-button { width: 100%; }
            .persona-header { flex-direction: column; text-align: center; }
            .persona-insights-grid, .narrative-grid { grid-template-columns: 1fr; }
            .path-outcome-grid { grid-template-columns: 1fr; gap: 16px; }
            .playbook-table { font-size: 14px; }
            .playbook-table th, .playbook-table td { padding: 12px 8px; }
            .footer-content { grid-template-columns: 1fr; text-align: center; }
            .persona-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
            .share-badge-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>
    <header id="header">
        <div class="container">
            <nav>
                <div class="logo-container">
                    <a href="/" class="logo">
                        <img src="images/logo1.png" alt="WhyUser" class="logo-image">
                    </a>
                    <span class="tagline">Behavioral OS for Business</span>
                </div>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#how-it-works-section">How It Works</a></li>
                    <li><a href="#waitlist">Early Access</a></li>
                </ul>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <section class="hero" id="heroSection">
        <div class="container">
            <div class="hero-content fade-in">
                <h1> See Your Site Through Your <span class="gradient-text">Buyer's Eyes</span></h1>
                <p class="hero-subtitle"><br>Stop building blind. Get the evidence from <b>AI buyer simulations</b> to end debates and ship what actually converts.</p>

                <div class="analysis-input-section">
                    <h3>Get Your Free Buyer Insight Brief</h3>
                    <div class="url-input">
                        <input type="url" placeholder="Enter your landing page URL..." id="pageUrl">
                        <button class="predict-button" id="analyzeBtn" onclick="runAnalysis()">Analyze My Page</button>
                    </div>
                    <p class="input-context">No GA access needed. Just a URL.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="interactiveDemoSection">
        <div class="container">
            <div id="personaSelectorSection">
                <div class="section-header">
                    <h2>Buyer Personas Identified</h2>
                    <p>We've identified the key buyer personas for your site. The brief below will be based on the selected roles, which you can customize.</p>
                </div>
                <div class="persona-grid" id="personaGrid">
                </div>
            </div>

            <div id="briefSection">
                <div class="section-header" id="reportHeader">
                    <h2>Your Live Buyer Insight Brief</h2>
                    <p>Here's how your key buyer personas actually see your page. No opinions, just simulated behavior.</p>
                </div>
                <div class="results-grid" id="resultsGrid">
                </div>
            </div>

            <div class="analysis-progress" id="analysisProgress" style="display: none;">
                <p>Generating Buyer Personas...</p>
            </div>
        </div>
    </section>

    <section class="how-it-works-section" id="how-it-works-section">
        <div class="container">
            <div class="how-header fade-in">
                <h2>Go From "Guess" to "Evidence" in 3 Steps</h2>
                <p>Our engine uses AI, cognitive science, and chaos modeling to simulate real-world buyer behavior, delivering a clear verdict before you build.</p>
            </div>
            <div class="how-steps-grid">
                <div class="how-step fade-in">
                    <div class="step-number">STEP 1</div>
                    <h3 class="step-title">Page & Persona Analysis</h3>
                    <p class="step-description">We analyze your page's structure, copy, and trust signals, then simulate your core B2B buyer personas (like the Security Guardian or Economic Buyer).</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 2</div>
                    <h3 class="step-title">Behavioral Simulation</h3>
                    <p class="step-description">Hundreds of AI "buyers" navigate your page. We record every virtual click, scroll, and moment of frustration to identify hidden friction points.</p>
                </div>
                <div class="how-step fade-in">
                    <div class="step-number">STEP 3</div>
                    <h3 class="step-title">Actionable Buyer Insight Brief</h3>
                    <p class="step-description">You get a one-page summary showing exactly what resonated, what caused confusion, and a prioritized list of fixes to improve conversion.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="waitlist-section" id="waitlist">
        <div class="container">
            <div class="waitlist-container">
                <div class="waitlist-header fade-in">
                    <h2>Get Early Access</h2>
                    <p>Stop debating and start building with evidence. Get your first Buyer Insight Brief for free.</p>
                </div>

                <div class="waitlist-form fade-in">
                    <form id="waitlistForm" onsubmit="submitWaitlist(event)">
                        <div class="form-group">
                            <input type="email" placeholder="Work email" required>
                        </div>
                        <div class="form-group">
                            <input type="text" placeholder="Company name" required>
                        </div>
                        <button type="submit" class="submit-button">Request Early Access</button>
                    </form>
                    <p class="privacy-note">We'll only email about WhyUser updates. No spam.</p>
                </div>

                <div class="success-checkmark" id="successMessage">
                    <svg viewBox="0 0 52 52">
                        <circle class="circle" cx="26" cy="26" r="25" fill="none" />
                        <path class="check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                    <p style="color: var(--success); font-weight: 600;">Thank you! We'll be in touch soon.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>WhyUser</h4>
                    <p style="margin-top: 12px; line-height: 1.6;">See your website through your buyer's eyes. Get AI-driven pre-launch analysis to build pages that convert.</p>
                </div>
                <div class="footer-section">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="#how-it-works-section">How It Works</a></li>
                        <li><a href="#">Pricing</a></li>
                        <li><a href="#">Documentation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 WhyUser. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- Static page logic ---
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        mobileMenuToggle.addEventListener('click', () => navLinks.classList.toggle('open'));
        window.addEventListener('scroll', () => { document.getElementById('header').classList.toggle('scrolled', window.scrollY > 100); });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    navLinks.classList.remove('open');
                }
            });
        });
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        function submitWaitlist(event) {
            event.preventDefault();
            document.getElementById('waitlistForm').style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
        }

        // --- ENHANCED Interactive Demo Logic ---
        const analyzeBtn = document.getElementById('analyzeBtn');
        const demoSection = document.getElementById('interactiveDemoSection');
        const personaSelectorSection = document.getElementById('personaSelectorSection');
        const briefSection = document.getElementById('briefSection');
        const resultsGrid = document.getElementById('resultsGrid');
        const analysisProgress = document.getElementById('analysisProgress');
        const personaGrid = document.getElementById('personaGrid');

        const allPersonas = [
            { code: 'EB', name: 'Economic Buyer', icon: '💰', role: 'Approves budget, focuses on ROI' },
            { code: 'TD', name: 'Tech Evaluator', icon: '⚙️', role: 'Validates features & integration' },
            { code: 'GR', name: 'Security Guardian', icon: '🛡️', role: 'Vets for risk & compliance' },
            { code: 'CH', name: 'Champion', icon: '🏆', role: 'Advocates for the solution internally' },
            { code: 'LS', name: 'Legal/Procurement', icon: '⚖️', role: 'Manages contracts & vendor risk' },
            { code: 'IN', name: 'Influencer', icon: '🌟', role: 'Shapes opinion with expertise' },
            { code: 'EU', name: 'End User', icon: '👩‍💻', role: 'Cares about daily workflow impact' },
            { code: 'IT', name: 'IT Administrator', icon: '🖥️', role: 'Manages implementation & infra' }
        ];

        const detailedPersonaData = {
            SecurityGuardian: { 
                id: 'SecurityGuardian', 
                icon: '🛡️', 
                name: '“Security-Guardian” Persona', 
                context: '24% Traffic Weight. Goal: Mitigate Risk.', 
                positives: ['“Protect customer data” headline matched intent (84%)', 'Dark colour-scheme signals seriousness (62%)', 'Live-chat staffed by “CISSP-certified” agent (41%)'], 
                negatives: ['No SOC-2 or ISO-27001 badge above the fold (93%)', 'Phrase “enterprise-grade encryption” felt vague (77%)', 'No data-retention policy link (55%)'], 
                path: 'HOME → /product (scroll 38%) → /pricing → BOUNCE', 
                session: '12s', 
                ctaPerformance: '0/50', 
                monologue: [
                    { time: '00:02', event: 'scan', element: 'headline', thought: '“Okay, \'Simple, Transparent\'. A bold claim that triggers my skepticism. Let\'s see if they back it up.”' }, 
                    { time: '00:05', event: 'distraction', element: 'animated_cta_button', thought: '“That flashing button is annoying and feels \'salesy\'. It\'s eroding my trust.”' }, 
                    { time: '00:12', event: 'scan', element: 'footer', thought: '“I\'ll just scan to the bottom for the SOC-2 logo. It\'s not here. This confirms my bias that this company isn\'t enterprise-ready.”' },
                    { time: '00:16', event: 'decision', element: 'close_button', thought: '“This is too much work. The combination of unclear pricing and distracting UI makes me trust them less. I\'m out.”' }
                ],
                finalVerdict: {
                    outcome: 'ABANDON',
                    reason: "The page failed to provide immediate, verifiable proof of enterprise compliance, triggering skepticism and violating my core need for visible trust signals.",
                    keyIrritation: "The animated button combined with the missing SOC-2 logo on the pricing page."
                }
            },
            TechEvaluator: { 
                id: 'TechEvaluator', 
                icon: '⚙️', 
                name: '“Tech-Evaluator” Persona', 
                context: '18% Traffic Weight. Goal: Validate Technical Fit.', 
                positives: ['“5-minute SDK integration” copy (71%)', 'Code snippet with cURL request (54%)', 'Performance benchmark chart (37%)'], 
                negatives: ['“Single-click API” claim contradicted doc page (68%)', 'Hidden pricing tiers after 3 scrolls (51%)', '8-field demo form exceeded patience threshold (43%)'], 
                path: 'HOME → /product → /docs → BOUNCE', 
                session: '4m 32s', 
                ctaPerformance: '2/50', 
                monologue: [
                    { time: '00:03', event: 'scan', element: 'headline', thought: '"Okay, SDK integration claim is strong. Let\'s see the docs."' }, 
                    { time: '01:20', event: 'scroll', element: 'docs_page', thought: '"The code samples are decent, but wait... this isn\'t single-click."' }, 
                    { time: '02:15', event: 'scroll', element: 'pricing_page', thought: '"Ugh, have to scroll forever to find pricing. Not transparent."' }, 
                    { time: '02:45', event: 'decision', element: 'demo_form', thought: '"An 8-field form just to see a demo? No thanks." → closes tab' }
                ],
                finalVerdict: {
                    outcome: 'ABANDON',
                    reason: "The claims made on the marketing page were contradicted by the technical documentation, breaking trust and signaling a lack of transparency.",
                    keyIrritation: "The discrepancy between the 'single-click API' claim and the reality in the docs."
                }
            }
        };
        
        const briefDividerHTML = `<div class="brief-divider"></div>`;
        const executiveSummaryHTML = `<div class="brief-section" id="executiveSummarySection"> <div class="section-header" style="margin-bottom: 24px;"> <h2>Executive Summary</h2> </div> <ul class="executive-summary-list"> <li>Your <strong>Guardian Trust Score</strong> is <strong>31 / 100</strong> → Bottom 12th percentile among security-SaaS sites we track.</li> <li>Fixing the three issues below would move you to the <strong>60th percentile</strong> and unlock an estimated <strong>+47% more demo requests</strong> (benchmark-based).</li> </ul> </div>`;
        const strategicNarrativeHTML = `<div class="brief-section strategic-narrative-section" id="strategicNarrativeSection"><h3>💡 Strategic Narrative Alignment</h3><p class="aha-moment">"The page fails at its core strategic goal. It wants me to believe it's a 'modern disruptor,' but its lack of visible, hard compliance proof reinforces my mental model that 'modern' means 'risky'. The story falls apart on the first scan."</p><div class="narrative-grid"><div class="narrative-column narrative-strengths"><h4>Strengths</h4><ul class="narrative-list"><li>The clean UI and modern design successfully communicate the 'modern' part of the narrative.</li></ul></div><div class="narrative-column narrative-weaknesses"><h4>Weaknesses</h4><ul class="narrative-list"><li>The page fails to provide immediate, overwhelming evidence (like a SOC-2 logo above the fold) to counteract my default belief that new vendors are insecure.</li><li>Using marketing buzzwords like 'Next-Gen Synergy' instead of technical specifications makes the 'disruptor' claim feel unsubstantiated and untrustworthy.</li></ul></div></div><div class="narrative-recommendation"><h4>Recommendation for Alignment</h4><p>To make the 'agile but secure' narrative believable, you must over-index on proof. Lead with the SOC-2 and ISO certifications in the hero banner to immediately address my primary objection before telling the rest of your story.</p></div></div>`;
        const heatMapHTML = `<div class="brief-section" id="heatMapSection"> <div class="section-header" style="margin-bottom: 24px;"> <h2>Friction Heat Map</h2> </div> <table class="heat-map-table"> <thead> <tr> <th>Persona × Funnel Page</th> <th>HOME</th> <th>/PRODUCT</th> <th>/PRICING</th> <th>/DEMO FORM</th> </tr> </thead> <tbody> <tr> <td>Security-Guardian</td> <td><span class="friction-high">████</span></td> <td><span class="friction-med">████░░</span></td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-none">░░░░</span></td> </tr> <tr> <td>Tech-Evaluator</td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-med">████░░</span></td> <td><span class="friction-low">██░░</span></td> <td><span class="friction-none">░░░░</span></td> </tr> <tr> <td>C-Level Executive</td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-high">████</span></td> <td><span class="friction-med">███░</span></td> </tr> <tr> <td>End-User</td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-none">░░░░</span></td> <td><span class="friction-low">░░░</span></td> <td><span class="friction-none">░░░░</span></td> </tr> </tbody> </table> <div class="heat-map-legend"><span><span class="friction-high">████</span> High Friction</span> <span><span class="friction-none">░░░░</span> Low Friction</span></div> </div>`;

        function createPersonaCardHTML(persona) { 
            return `<div class="brief-section persona-card" id="${persona.id}"> <div class="persona-header"> <div class="persona-icon">${persona.icon}</div> <div class="persona-title-group"> <h3 class="persona-name">${persona.name}</h3> <p class="persona-role-context">${persona.context}</p> </div> </div> <div class="persona-insights-grid"> <div class="insight-column"> <h4 style="color: var(--success);">✅ What Resonated</h4> <ul class="insight-list positive-insights">${persona.positives.map(p => `<li>${p}</li>`).join('')}</ul> </div> <div class="insight-column"> <h4 style="color: var(--error);">⚠ What Stalled / Confused</h4> <ul class="insight-list negative-insights">${persona.negatives.map(n => `<li>${n}</li>`).join('')}</ul> </div> </div> <div class="path-outcome-section"> <h4>Path to Abandonment</h4> <div class="path-outcome-grid"> <div class="path-outcome-metric"><p>Typical Path</p><span>${persona.path}</span></div> <div class="path-outcome-metric"><p>Median Session</p><span>${persona.session}</span></div> <div class="path-outcome-metric"><p>CTA Performance</p><span class="bad-outcome">${persona.ctaPerformance} clicks</span></div> </div> </div> <div class="monologue-section"> <h4>Simulated Journey Timeline</h4> <div class="monologue-timeline" id="monologue-${persona.id}"><span class="blinking-cursor"></span></div> </div> <div class="final-verdict-section"> <h4>Final Verdict & Key Irritant</h4> <div class="verdict-reason"><strong>Outcome: ${persona.finalVerdict.outcome}</strong><p>${persona.finalVerdict.reason}</p></div> <div class="verdict-irritant"><strong>Key Irritant:</strong><p>${persona.finalVerdict.keyIrritation}</p></div> </div> </div>`; 
        }

        const benchmarkHTML_Guardian = `<div class="section-header" style="margin-bottom: 32px; margin-top: 32px;"><h3>Persona Benchmark: Security Guardian</h3></div><div class="benchmark-metric"><div class="benchmark-header"><span class="benchmark-name">Guardian Trust Score</span><span class="benchmark-score"><span class="your-value" style="color: var(--error);">31</span> / 100<span class="gap gap-negative">(−23 pts)</span></span></div><div class="benchmark-bar-container"><div class="benchmark-bar"></div><div class="benchmark-marker" style="left: calc((31 - 35) / (72 - 35) * 100% + 4%);"><div class="benchmark-marker-line"></div></div></div><div class="bar-labels"><span>25th %ile (35)</span><span>75th %ile (72)</span></div></div>`;
        const benchmarkHTML_TechEval = `<div class="section-header" style="margin-bottom: 32px; margin-top: 32px;"><h3>Persona Benchmark: Tech Evaluator</h3></div><div class="benchmark-metric"><div class="benchmark-header"><span class="benchmark-name">Technical Credibility Score</span><span class="benchmark-score"><span class="your-value" style="color: var(--warning);">45</span> / 100<span class="gap gap-negative">(−15 pts)</span></span></div><div class="benchmark-bar-container"><div class="benchmark-bar"></div><div class="benchmark-marker" style="left: calc((45 - 40) / (80 - 40) * 100%); background-color: var(--warning);"><div class="benchmark-marker-line"></div></div></div><div class="bar-labels"><span>25th %ile (40)</span><span>75th %ile (80)</span></div></div>`;

        const diagnosticsPlaybookHTML_Guardian = `
            <div class="business-impact-statement"><strong>Business Impact (Guardian):</strong> Failing to provide immediate proof of compliance makes the product a non-starter for enterprise accounts, killing deals before they even reach a salesperson.</div>
            <div class="critique-grid">
                <div class="critique-card"><div class="critique-header">Messaging Critique</div><div class="critique-body"><strong>Critique:</strong><p>The term 'enterprise-grade' is vague and untrustworthy. This persona needs specific, verifiable facts, not marketing jargon.</p><div class="fix-recommendation"><strong>Recommended Fix:</strong><p>Replace 'enterprise-grade encryption' with 'AES-256, SOC-2 Type II Certified, and FedRAMP-ready'.</p></div></div></div>
                <div class="critique-card"><div class="critique-header">Conversion Critique</div><div class="critique-body"><strong>Critique:</strong><p>The primary CTA 'Book a Demo' is premature. The Guardian is in a 'verify, then trust' mindset and is not ready for a sales conversation.</p><div class="fix-recommendation"><strong>Recommended Fix:</strong><p>Offer a 'View Security & Compliance Docs' CTA above the fold. Treat the demo as a secondary action for those who have already verified your credentials.</p></div></div></div>
            </div>
            <div class="playbook-section">
                <div class="playbook-title"><h3>Prioritized Playbook</h3></div>
                <table class="playbook-table"><thead><tr><th>Rank</th><th>Recommendation</th><th>Effort</th><th>Est. Impact Metric</th></tr></thead><tbody>
                    <tr><td>1</td><td>Add SOC-2 & ISO-27001 badges in hero banner</td><td><span class="effort-badge effort-low">Low</span></td><td class="impact-high">+22 Guardian Score</td></tr>
                    <tr><td>2</td><td>Provide a direct link to the data retention policy in the footer</td><td><span class="effort-badge effort-low">Low</span></td><td class="impact-med">+9 Guardian Score</td></tr>
                </tbody></table>
            </div>
            ${benchmarkHTML_Guardian}
            `;

        const diagnosticsPlaybookHTML_TechEval = `
            <div class="business-impact-statement"><strong>Business Impact (Tech Evaluator):</strong> Contradictory claims between marketing and documentation destroy technical credibility, leading to a loss of the internal champion required to push the deal forward.</div>
            <div class="critique-grid">
                <div class="critique-card"><div class="critique-header">Friction Critique</div><div class="critique-body"><strong>Critique:</strong><p>An 8-field demo form creates a massive friction barrier for a technical user who wants to evaluate the product, not enter a sales funnel.</p><div class="fix-recommendation"><strong>Recommended Fix:</strong><p>Implement a 2-step form. Step 1 asks only for an email to access a sandbox environment. Step 2 can ask for more details later.</p></div></div></div>
                 <div class="critique-card"><div class="critique-header">Competitive Gap Analysis</div><div class="critique-body"><strong>Critique:</strong><p>Competitors like 'Datadog' offer an instant, no-login sandbox environment. Requiring a form submission to evaluate the product is a major competitive disadvantage.</p><div class="fix-recommendation"><strong>Recommended Fix:</strong><p>Create a limited, public-facing interactive sandbox to showcase the product's core functionality without requiring user information.</p></div></div></div>
            </div>
            <div class="playbook-section">
                <div class="playbook-title"><h3>Prioritized Playbook</h3></div>
                <table class="playbook-table"><thead><tr><th>Rank</th><th>Recommendation</th><th>Effort</th><th>Est. Impact Metric</th></tr></thead><tbody>
                    <tr><td>1</td><td>Shorten demo form to 3 fields or use progressive profiling</td><td><span class="effort-badge effort-med">Medium</span></td><td class="impact-high">+18 Tech-Eval Conv.</td></tr>
                    <tr><td>2</td><td>Ensure marketing claims ('single-click API') are 100% consistent with docs</td><td><span class="effort-badge effort-low">Low</span></td><td class="impact-high">+15 Credibility Score</td></tr>
                </tbody></table>
            </div>
            ${benchmarkHTML_TechEval}
            `;

        const diagnosticsPlaybookSectionHTML = `
            <div class="brief-section diagnostics-playbook-section" id="diagnosticsPlaybookSection">
                <div class="section-header" style="margin-bottom: 32px;"> <h2>Detailed Diagnostics & Playbook</h2> </div>
                <div class="tab-navigation">
                    <button class="tab-btn active" data-persona="SecurityGuardian">🛡️ Security Guardian</button>
                    <button class="tab-btn" data-persona="TechEvaluator">⚙️ Tech Evaluator</button>
                </div>
                <div class="tab-content-container">
                    <div class="tab-content active" data-persona="SecurityGuardian">${diagnosticsPlaybookHTML_Guardian}</div>
                    <div class="tab-content" data-persona="TechEvaluator">${diagnosticsPlaybookHTML_TechEval}</div>
                </div>
            </div>`;
        
        const shareBadgeHTML = `<div class="brief-section" id="shareBadgeSection"> <div class="share-badge-grid"> <div class="share-badge-text"> <p><strong>Share this report.</strong> Give your team the evidence needed to make the right call.</p> <a href="#waitlist" class="predict-button" style="font-size: 15px; padding: 12px 24px;">Get Sharable Link</a> </div> <div class="share-badge" id="shareBadgeCard"> <div id="shareBadgeTitle">GUARDIAN TRUST SCORE</div> <div class="score" id="shareBadgeScore" style="color: var(--error);">31 / 100</div> <div id="shareBadgePercentile">Bottom 12th %tile in Security</div> </div> </div> </div>`;
        
        function typeMonologue(monologueId, monologueLines) {
            const container = document.getElementById(monologueId); if (!container) return; container.innerHTML = ''; let lineIndex = 0;
            function showNextLine() {
                if (lineIndex < monologueLines.length) {
                    const entry = document.createElement('div'); entry.className = 'monologue-entry'; 
                    const { time, event, element, thought } = monologueLines[lineIndex]; 
                    entry.innerHTML = `<span class="monologue-time">[${time}]</span> <span class="monologue-event">${event.toUpperCase()}</span> on <strong>${element}</strong> → <span class="monologue-thought">'${thought}'</span>`; 
                    container.appendChild(entry);
                    setTimeout(() => entry.style.opacity = 1, 10); lineIndex++; setTimeout(showNextLine, 1500);
                }
            } showNextLine();
        }

        async function runAnalysis() {
            const url = document.getElementById('pageUrl').value; if (!url || !url.startsWith('http')) { alert('Please enter a valid URL (e.g., https://example.com).'); return; }
            analyzeBtn.disabled = true;
            demoSection.style.display = 'block'; demoSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            personaSelectorSection.style.display = 'none'; briefSection.style.display = 'none'; analysisProgress.style.display = 'block'; analysisProgress.querySelector('p').textContent = 'Generating Buyer Personas...'; personaGrid.innerHTML = ''; resultsGrid.innerHTML = '';

            await new Promise(resolve => setTimeout(resolve, 1500));
            analysisProgress.style.display = 'none'; personaSelectorSection.style.display = 'block';
            const selectedPersonas = ['Security Guardian', 'Tech Evaluator'];
            allPersonas.forEach(p => {
                const card = document.createElement('div'); card.className = 'persona-selector-card';
                if (selectedPersonas.includes(p.name)) { card.classList.add('selected'); }
                card.innerHTML = `<div class="persona-selector-icon">${p.icon}</div><div class="persona-selector-name">${p.name}</div><p class="persona-selector-role">${p.role}</p>`;
                personaGrid.appendChild(card);
            });
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            briefSection.style.display = 'block'; briefSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            resultsGrid.innerHTML = `<div class="master-brief-card" id="masterBriefCard"></div>`;
            const masterCard = document.getElementById('masterBriefCard');
            
            const elementSequence = [
                { html: executiveSummaryHTML, id: 'executiveSummarySection' },
                { html: strategicNarrativeHTML, id: 'strategicNarrativeSection' },
                { html: heatMapHTML, id: 'heatMapSection' },
                { html: createPersonaCardHTML(detailedPersonaData.SecurityGuardian), id: detailedPersonaData.SecurityGuardian.id, monologue: detailedPersonaData.SecurityGuardian.monologue },
                { html: createPersonaCardHTML(detailedPersonaData.TechEvaluator), id: detailedPersonaData.TechEvaluator.id, monologue: detailedPersonaData.TechEvaluator.monologue },
                { html: diagnosticsPlaybookSectionHTML, id: 'diagnosticsPlaybookSection' },
                { html: shareBadgeHTML, id: 'shareBadgeSection' }
            ];
            
            masterCard.classList.add('visible');

            for (let i = 0; i < elementSequence.length; i++) {
                const el = elementSequence[i];
                if (i > 0) { masterCard.innerHTML += briefDividerHTML; }
                masterCard.innerHTML += el.html;
                
                await new Promise(resolve => setTimeout(resolve, 100)); 
                
                const section = document.getElementById(el.id);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    section.classList.add('visible');
                }
                
                if (el.monologue) {
                    typeMonologue('monologue-' + el.id, el.monologue);
                }
                
                await new Promise(resolve => setTimeout(resolve, 2000));
            }
            
            // **BUG FIX: INITIALIZE TABS *AFTER* THE ENTIRE CARD IS RENDERED**
            const tabContainer = document.getElementById('diagnosticsPlaybookSection');
            if(tabContainer) {
                const tabNav = tabContainer.querySelector('.tab-navigation');
                const tabContents = tabContainer.querySelectorAll('.tab-content');
                const shareBadge = {
                    title: document.getElementById('shareBadgeTitle'),
                    score: document.getElementById('shareBadgeScore'),
                    percentile: document.getElementById('shareBadgePercentile')
                };

                if (tabNav) {
                    tabNav.addEventListener('click', (e) => {
                        const clickedButton = e.target.closest('.tab-btn');
                        if (!clickedButton) return;
                        
                        const targetPersona = clickedButton.dataset.persona;

                        tabNav.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                        clickedButton.classList.add('active');

                        tabContents.forEach(content => {
                            content.classList.toggle('active', content.dataset.persona === targetPersona);
                        });

                        if (targetPersona === 'SecurityGuardian') {
                            shareBadge.title.textContent = 'GUARDIAN TRUST SCORE';
                            shareBadge.score.textContent = '31 / 100';
                            shareBadge.score.style.color = 'var(--error)';
                            shareBadge.percentile.textContent = 'Bottom 12th %tile in Security';
                        } else if (targetPersona === 'TechEvaluator') {
                            shareBadge.title.textContent = 'TECH CREDIBILITY SCORE';
                            shareBadge.score.textContent = '45 / 100';
                            shareBadge.score.style.color = 'var(--warning)';
                            shareBadge.percentile.textContent = 'Bottom 30th %tile for Dev Tools';
                        }
                    });
                }
            }

            analyzeBtn.disabled = false;
        }
    </script>
</body>
</html>